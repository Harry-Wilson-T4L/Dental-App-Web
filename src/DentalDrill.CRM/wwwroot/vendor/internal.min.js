!function(t){var e;function n(){this._handlers=[]}e=t.Utilities||(t.Utilities={}),n.prototype.raise=function(t,e){for(var n=0,r=this._handlers;n<r.length;n++)(0,r[n])(t,e)},n.prototype.subscribe=function(t){for(var e=0;e<this._handlers.length;e++)if(this._handlers[e]===t)return;this._handlers.push(t)},n.prototype.unsubscribe=function(t){for(var e=0;e<this._handlers.length;e++)if(this._handlers[e]===t)return void this._handlers.splice(e,1)},t=n,e.EventHandler=t}(DevGuild=DevGuild||{}),function(t){function e(t,e){this.key=t,this.value=e}(t.Utilities||(t.Utilities={})).QueryStringItem=e}(DevGuild=DevGuild||{}),function(t){var i;function a(){this._items=[]}i=t.Utilities||(t.Utilities={}),a.parse=function(t){var e=new a;if(!t||t.length<=1)return e;for(var n=t.substring(1).split("&"),r=0;r<n.length;r++){var o=n[r].split("="),o=new i.QueryStringItem(decodeURIComponent(o[0]),decodeURIComponent(o[1]));e._items.push(o)}return e},a.prototype.build=function(){for(var t="",e=0,n=this._items;e<n.length;e++){var r=n[e];r.key&&r.value&&(t+="&"+encodeURIComponent(r.key)+"="+encodeURIComponent(r.value))}return""===t?t:"?"+t.substring(1)},a.prototype.get=function(t){t=this.find(t);return t?t.value:void 0},a.prototype.set=function(t,e){var n=this.find(t);return n?n.value=e:(n=new i.QueryStringItem(t,e),this._items.push(n)),this},a.prototype.find=function(t){for(var e=0,n=this._items;e<n.length;e++){var r=n[e];if(r.key.toLowerCase()===t.toLowerCase())return r}},t=a,i.QueryString=t}(DevGuild=DevGuild||{}),function(t){var e;function n(t){t=/^([^?]+)\??(.*)$/.exec(t);if(!t)throw new Error("Invalid uri");this._path=t[1],this._query=t[2]?e.QueryString.parse(t[2]):new e.QueryString}e=t.Utilities||(t.Utilities={}),Object.defineProperty(n.prototype,"path",{get:function(){return this._path},set:function(t){this._path=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"query",{get:function(){return this._query},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._path+this._query.build()},enumerable:!1,configurable:!0}),t=n,e.UriBuilder=t}(DevGuild=DevGuild||{}),function(t){var e,r;function n(){this._handlers=[]}function o(){this._map={}}function i(){}e=(t=(e=t.AspNet||(t.AspNet={})).Forms||(e.Forms={})).AjaxForms||(t.AjaxForms={}),n.prototype.subscribe=function(t){this._handlers.push(t)},n.prototype.fire=function(t){for(var e=0,n=this._handlers;e<n.length;e++)(0,n[e])(t)},r=n,o.prototype.subscribe=function(t,e){var n=this._map[t];n||(n=new r,this._map[t]=n),n.subscribe(e)},o.prototype.fire=function(t,e){t=this._map[t];t&&t.fire(e)},t=o,Object.defineProperty(i,"events",{get:function(){return i._events},enumerable:!1,configurable:!0}),Object.defineProperty(i,"htmlEvents",{get:function(){return i._htmlEvents},enumerable:!1,configurable:!0}),i.handleComplete=function(t,e){var n;"success"===e&&((n=t.getResponseHeader("content-type")).match("^application/json")?(e=JSON.parse(t.responseText))&&e.formId&&e.result&&i.events.fire(e.formId,e.result):!n.match("^text/html")||(t=(n=$(t.responseText)).eq(0).attr("id"))&&(n=(n=n.eq(0).attr("data-inline-response"))?JSON.parse(n):void 0,i.htmlEvents.fire(t,n)))},i.waitFor=function(n){return new Promise(function(e,t){i.events.subscribe(n,function(t){e(t)})})},i.waitForHtml=function(n){return new Promise(function(e,t){i.htmlEvents.subscribe(n,function(t){e(t)})})},i._events=new t,i._htmlEvents=new t,t=i,e.AjaxFormsManager=t}(DevGuild=DevGuild||{}),function(n){var t,r;function e(){}t=(t=(t=n.Controls||(n.Controls={})).TabStrip||(t.TabStrip={})).Navigation||(t.Navigation={}),e.enable=function(t){$(t).data("kendoTabStrip").bind("select",function(t){var e=$(t.item).attr("data-tabname"),t=location.protocol+"//"+location.host+location.pathname,e=n.Utilities.QueryString.parse(location.search).set("Tab",e).build();history.replaceState({},document.title,t+e)})},r=e,t.TabStripNavigator=r,$(function(){$(".k-tabstrip-autonavigation").each(function(t,e){return r.enable(e)})})}(DevGuild=DevGuild||{}),function(t){var e;function n(){}t=(e=(t=(e=t.AspNet||(t.AspNet={})).Controls||(e.Controls={})).Grids||(t.Grids={})).Errors||(e.Errors={}),n.handleRequestStart=function(t){},n.handleGridError=function(n){var r;n.errors?(r="Errors:\n",Object.keys(n.errors).forEach(function(e){var t=n.errors[e];"errors"in t&&t.errors.forEach(function(t){r+=e?e+": "+t+"\n":t+"\n"})}),alert(r),n.sender.cancelChanges()):403===n.xhr.status&&(alert("Access denied"),n.sender.cancelChanges())},e=n,t.GridErrorHandler=e}(DevGuild=DevGuild||{});var __awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e;function n(){}t=(e=(t=(e=t.AspNet||(t.AspNet={})).Controls||(e.Controls={})).Grids||(t.Grids={})).Handlers||(e.Handlers={}),n.createButtonClickHandler=function(n){return function(t,e){t.preventDefault();t=this.dataItem(t.currentTarget.closest("tr"));n(t)}},n.createButtonClickNavigationHandler=function(r){return function(t,e){t.preventDefault();var n=this.dataItem(t.currentTarget.closest("tr"));r(n).execute(t.ctrlKey||e&&2===e.which)}},n.createGridButtonClickNavigationHandler=function(t,r){var e=this;return $(document).on("click",t,function(n){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){return n.preventDefault(),e=$(n.target),r(e).navigate(),[2]})})}),{}},n.createGridButtonClickPopupHandler=function(t,i,a){var e=this;return $(document).on("click",t,function(o){return __awaiter(e,void 0,void 0,function(){var e,n,r;return __generator(this,function(t){return o.preventDefault(),e=$(o.target),r=i(e),o.ctrlKey?r.open():(n=$("<div></div>"),r={title:"",actions:["close"],content:r.value,width:"800px",height:"600px",modal:!0,visible:!1,close:function(){return n.data("kendoWindow").destroy()}},a&&$.extend(r,a(e)),n.kendoWindow(r),(r=n.data("kendoWindow")).center(),r.open()),[2]})})}),$(document).on("auxclick",t,function(t){2===t.which&&(t.preventDefault(),t=$(t.target),i(t).open())}),{}},n.createButtonClickPopupHandler=function(a,s){return function(t,e){t.preventDefault();var n,r,o=this.dataItem(t.currentTarget.closest("tr")),i=a(o);null!=i&&(t.ctrlKey||e&&2===e.which?i.open():(n=$("<div></div>"),i={title:"",actions:["close"],content:i.value,width:"800px",height:"600px",modal:!0,visible:!1,close:function(){return n.data("kendoWindow").destroy()}},s&&$.extend(i,s(o)),n.kendoWindow(i),(r=n.data("kendoWindow")).center(),r.open(),$(window).on("resize",function(t){0===r.element.closest("html").length||r.element.is(":hidden")||r.center()})))}},e=n,t.GridHandlers=e}(DevGuild=DevGuild||{});var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(t){var e=function(){};t.GridFilterField=e;var r,n=(__extends(o,r=e),o.prototype.apply=function(t,e){var n=this,r=this._root.val();if(Array.isArray(r))throw new Error("Value cannot be array");"string"==typeof r&&(r=parseInt(r)),e&&!e.every(function(t){return t!==n._fieldName})||!r||t.push({field:this._fieldName,operator:"eq",value:r})},o.prototype.reset=function(){this._root.val("").trigger("change")},Object.defineProperty(o.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),o);function o(t,e){var n=r.call(this)||this;return n._root=t,n._fieldName=e,n}t.IntSelectGridFilterField=n;var i,n=(__extends(a,i=e),a.prototype.apply=function(t,e){var n=this,r=this._root.data("kendoDropDownList").dataItem().Id;e&&!e.every(function(t){return t!==n._fieldName})||!r||"00000000-0000-0000-0000-000000000000"===r||t.push({field:this._fieldName,operator:this._operator,value:r})},a.prototype.reset=function(){this._root.data("kendoDropDownList").trigger("change")},Object.defineProperty(a.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),a);function a(t,e,n){void 0===n&&(n="eq");var r=i.call(this)||this;return r._root=t,r._fieldName=e,r._operator=n,r}t.IdDropDownListGridFilterField=n;var s,n=(__extends(l,s=e),l.prototype.apply=function(t,e){var n=this,r=this._getValue(this._root.data("kendoDropDownList").dataItem());e&&!e.every(function(t){return t!==n._fieldName})||!r||this._defaultValue&&r===this._defaultValue||(this._applyValueDelegate?this._applyValueDelegate(t,r):t.push({field:this._fieldName,operator:this._operator,value:r}))},l.prototype.reset=function(){var t=this._root.data("kendoDropDownList");this._resetValueDelegate?t.value(this._resetValueDelegate()):t.value(this._defaultValue),t.trigger("change")},Object.defineProperty(l.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"kendoControl",{get:function(){return this._root.data("kendoDropDownList")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"applyValueDelegate",{get:function(){return this._applyValueDelegate},set:function(t){this._applyValueDelegate=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"resetValueDelegate",{get:function(){return this._resetValueDelegate},set:function(t){this._resetValueDelegate=t},enumerable:!1,configurable:!0}),l);function l(t,e,n){var r=void 0===n?{}:n,o=r.defaultValue,i=void 0===o?null:o,n=r.operator,o=void 0===n?"eq":n,n=r.value,r=void 0===n?function(t){return t}:n,n=s.call(this)||this;return n._root=t,n._fieldName=e,n._operator=o,n._defaultValue=i,n._getValue=r,n}t.DropDownListGridFilterField=n;var c,n=(__extends(u,c=e),u.prototype.apply=function(t,e){var n=this,r=this._getValue(this._root.data("kendoDropDownList").dataItem());e&&!e.every(function(t){return t!==n._fieldName})||!r||void 0!==this._defaultValue&&r.Value===this._defaultValue||t.push({field:this._fieldName,operator:this._operator,value:r.Value})},u.prototype.reset=function(){this._root.data("kendoDropDownList").trigger("change")},Object.defineProperty(u.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),u);function u(t,e,n){var r=void 0===n?{}:n,o=r.defaultValue,i=void 0===o?null:o,n=r.operator,o=void 0===n?"eq":n,n=r.value,r=void 0===n?function(t){return t}:n,n=c.call(this)||this;return n._root=t,n._fieldName=e,n._operator=o,n._defaultValue=i,n._getValue=r,n}t.ComplexDropDownListGridFilterField=n;var p,n=(__extends(f,p=e),f.prototype.apply=function(t,e){for(var n=this,r=this._root.data("kendoMultiSelect").value(),o=[],i=0;i<r.length;i++){var a=r[i];e&&!e.every(function(t){return t!==n._fieldName})||!a||o.push({field:this._fieldName,operator:"eq",value:a})}o.length&&t.push({logic:"or",filters:o})},f.prototype.reset=function(){this._root.data("kendoMultiSelect").trigger("change")},Object.defineProperty(f.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),f);function f(t,e){var n=p.call(this)||this;return n._root=t,n._fieldName=e,n}t.MultiSelectGridFilterField=n;var d,n=(__extends(h,d=e),h.prototype.apply=function(t,e){var n=this,r=this._root.val();if((!e||e.every(function(t){return t!==n._fieldName}))&&r)switch(r){case"true":t.push({field:this._fieldName,operator:"eq",value:"true"});break;case"false":t.push({field:this._fieldName,operator:"eq",value:"false"})}},h.prototype.reset=function(){this._root.val("").trigger("change")},Object.defineProperty(h.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),h);function h(t,e){var n=d.call(this)||this;return n._root=t,n._fieldName=e,n}t.BooleanSelectGridFilterField=n;var _,n=(__extends(g,_=e),g.prototype.apply=function(t,e){var n=this,r=this._root.val();e&&!e.every(function(t){return t!==n._fieldName})||!r||t.push({field:this._fieldName,operator:this._operator,value:r})},g.prototype.reset=function(){this._root.val("").trigger("change")},Object.defineProperty(g.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),g);function g(t,e,n){void 0===n&&(n="contains");var r=_.call(this)||this;return r._root=t,r._fieldName=e,r._operator=n,r}t.StringInputGridFilterField=n;var v,n=(__extends(y,v=e),y.prototype.apply=function(t,e){var n=this,r=this._root.data("kendoDatePicker").value();e&&!e.every(function(t){return t!==n._fieldName})||!r||t.push({field:this._fieldName,operator:this._operator,value:r})},y.prototype.reset=function(){this._root.data("kendoDatePicker").value(null),this._root.data("kendoDatePicker").trigger("change")},Object.defineProperty(y.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"kendoControl",{get:function(){return this._root.data("kendoDatePicker")},enumerable:!1,configurable:!0}),y);function y(t,e,n){void 0===n&&(n="eq");var r=v.call(this)||this;return r._root=t,r._fieldName=e,r._operator=n,r}t.DatePickerFilterField=n;var b,n=(__extends(m,b=e),m.prototype.apply=function(t,n){for(var r=this._root.val(),o=[],i=this,a=0;a<this._fieldNames.length;a++)!function(){var e=i._fieldNames[a];n&&!n.every(function(t){return t!==e})||!r||o.push({field:e,operator:"contains",value:r})}();o.length&&t.push({logic:"or",filters:o})},m.prototype.reset=function(){this._root.val("").trigger("change")},Object.defineProperty(m.prototype,"control",{get:function(){return this._root},enumerable:!1,configurable:!0}),m);function m(t,e){var n=b.call(this)||this;return n._root=t,n._fieldNames=e,n}t.StringInputGridFilterMultiField=n;var w,n=(__extends(C,w=e),C.prototype.apply=function(t,e){var n=this,r=this._root.val(),o=this._operator;e&&!e.every(function(t){return t!==n._fieldName})||!r||t.push({field:this._fieldName,operator:o,value:r})},C.prototype.reset=function(){this._root.val("").trigger("change")},C);function C(t,e,n){void 0===n&&(n="eq");var r=w.call(this)||this;return r._root=t,r._operator=n,r._fieldName=e,r}t.IntInputGridFilterField=n;var D,n=(__extends(x,D=e),x.prototype.apply=function(t,e){var n=this,r=this._root.val(),o=this._operator.val();if("string"!=typeof o)throw new Error("Operator must be function");o=this.convertOperatorToFilter(o),(!e||e.every(function(t){return t!==n._fieldName}))&&r&&o&&t.push({field:this._fieldName,operator:o,value:r})},x.prototype.reset=function(){this._root.val("").trigger("change"),this._operator.val("EqualsTo").trigger("change")},x.prototype.convertOperatorToFilter=function(t){if(t)switch(t){case"EqualsTo":return"eq";case"NotEqualsTo":return"neq";case"GreaterThan":return"gt";case"GreaterThanOrEqualsTo":return"gte";case"LessThan":return"lt";case"LessThanOrEqualsTo":return"lte"}},x);function x(t,e,n){var r=D.call(this)||this;return r._root=t,r._operator=e,r._fieldName=n,r}t.IntInputGridFilterFieldWithOperator=n;var k,e=(__extends(P,k=e),P.prototype.apply=function(t,e){var n=this,r=this._root.val(),o=this._operator;(!e||e.every(function(t){return t!==n._fieldName}))&&r&&o&&t.push({field:this._fieldName,operator:o,value:r})},P.prototype.reset=function(){this._root.val("").trigger("change")},P);function P(t,e,n){void 0===n&&(n="eq");var r=k.call(this)||this;return r._root=t,r._operator=n,r._fieldName=e,r}function S(t){this._root=t}function R(t){this._root=t}function F(t){this._root=t}function O(t,e){this._root=t,this._grid=e}function T(t,e){this._root=t,this._grids=e}t.NumberInputGridFilterField=e,Object.defineProperty(S.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),e=S,t.GridFilterFieldsCollection=e,Object.defineProperty(R.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),R.prototype.initialize=function(){this._fields=this.createFields(this.root),this.additionalInitialization()},R.prototype.getFilters=function(t){var e=[];return this._fields.applyAll(e,t),e},R.prototype.additionalInitialization=function(){},R.prototype.apply=function(t,e){t.dataSource.filter({logic:"and",filters:this.getFilters(e)}),t.dataSource.read()},R.prototype.reset=function(t){this._fields.resetAll(),this.apply(t)},e=R,t.DynamicGridFilter=e,Object.defineProperty(F.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),F.prototype.initialize=function(){this._fields=this.createFields(this.root),this.additionalInitialization()},F.prototype.getFilters=function(t){this._fields||this.initialize();var e=[];return this._fields.applyAll(e,t),e},F.prototype.additionalInitialization=function(){},F.prototype.apply=function(){this.applyFilter({logic:"and",filters:this.getFilters()})},F.prototype.reset=function(){this._fields.resetAll(),this.apply()},e=F,t.GridFilterCore=e,Object.defineProperty(O.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"grid",{get:function(){return this._grid},set:function(t){this._grid=t},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),O.prototype.initialize=function(){this._fields=this.createFields(this.root),this.additionalInitialization()},O.prototype.getFilters=function(t){var e=[];return this._fields.applyAll(e,t),e},O.prototype.additionalInitialization=function(){},O.prototype.apply=function(){this.grid.dataSource.filter({logic:"and",filters:this.getFilters()})},O.prototype.reset=function(){this._fields.resetAll(),this.apply()},e=O,t.GridFilter=e,Object.defineProperty(T.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"grids",{get:function(){return this._grids},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),T.prototype.initialize=function(){this._fields=this.createFields(this.root),this.additionalInitialization()},T.prototype.getFilters=function(t,e){var n=[];return this._fields[t].applyAll(n,e),n},T.prototype.additionalInitialization=function(){},T.prototype.apply=function(){for(var t=this.grids,e=0;e<t.length;e++){var n={logic:"and",filters:this.getFilters(e)};t[e].dataSource.filter(n),this.additionalApply(n,e)}},T.prototype.reset=function(){this._fields.forEach(function(t){return t.resetAll()}),this.apply()},e=T,t.GridsFilter=e}((t=t.Filters||(t.Filters={})).Grids||(t.Grids={}))}(DevGuild=DevGuild||{}),function(t){var e;function n(t,e){var n=this;void 0===e&&(e=null),this.select=function(){n.spiner.remove(),n.spiner=$("<div class='k-loading-image "+n.spinnerClass+"'></div>"),n.tabstripWrapper.append(n.spiner)},this.show=function(){n.spiner.remove()},this.activate=function(){n.spiner.remove()},this.contentLoaded=function(){n.spiner.remove()},this.error=function(){n.spiner.remove()},this.wrapper=t,this.spinnerClass="tabstrip-spinner-class-"+Math.random().toString(36).substring(2,6),null==e?(this.tabstripWrapper=t.find(".k-tabstrip-wrapper").eq(0),this.tabStrip=this.tabstripWrapper.find(".k-widget.k-tabstrip").eq(0).data("kendoTabStrip")):(this.tabstripWrapper=e,this.tabStrip=this.tabstripWrapper.data("kendoTabStrip")),this.spiner=$("<div class='k-loading-image "+this.spinnerClass+"'></div>"),this.wrapper.append(this.spiner),this.tabStrip.bind("select",this.select),this.tabStrip.bind("show",this.show),this.tabStrip.bind("activate",this.activate),this.tabStrip.bind("contentLoaded",this.contentLoaded),this.tabStrip.bind("error",this.error)}function r(t){$("."+t).each(function(){var t=$(this);new e(t)}),$("."+t+"-side").each(function(){var t=$(this).find(".k-widget.k-tabstrip");new e(t,t)})}t=(t=t.UI||(t.UI={})).TabStrip||(t.TabStrip={}),n.asyncInit=function(){r("tab-strip-spinner-async")},e=n,t.TabStripSpinner=e,$(function(){r("tab-strip-spinner")})}(DevGuild=DevGuild||{}),function(t){var e;function n(){}e=t.Utilities||(t.Utilities={}),n.treatAsUtc=function(t){var e=new Date;return e.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e},t=n,e.TimeZones=t}(DevGuild=DevGuild||{});var DevGuild,__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(t){var e=(n.prototype.areEquals=function(t,e){return this._comparer(t,e)},n);function n(t){this._comparer=t}t.EqualityComparer=e;var i=(Object.defineProperty(r.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),r.prototype.add=function(t){this._items.push(t)},r.prototype.insert=function(t,e){this._items.splice(t,0,e)},r.prototype.remove=function(t){t=this._items.indexOf(t);return!(t<0)&&(this._items.splice(t,1),!0)},r.prototype.removeAt=function(t){0<=t&&this._items.length>t&&this._items.splice(t,1)},r.prototype.toArray=function(){return this._items},r.prototype.select=function(n){return new r(this._items.map(function(t,e){return n(t,e)}))},r.prototype.count=function(n){return(n?this._items.filter(function(t,e){return n(t,e)}):this._items).length},r.prototype.sum=function(r){return r?this._items.reduce(function(t,e,n){return t+r(e,n)},0):this._items.reduce(function(t,e){return t+e},0)},r.prototype.where=function(n){return new r(this._items.filter(function(t,e){return n(t,e)}))},r.prototype.groupBy=function(t){for(var e=new a,n=0;n<this._items.length;n++)e.getOrCreateGroup(t(this._items[n],n)).items.add(this._items[n]);return e},r);function r(t){this._items=t||[]}t.Collection=i;var o,a=(__extends(s,o=i),s.prototype.getGroup=function(t){for(var e=0,n=this.items;e<n.length;e++){var r=n[e];if(this._keyComparer.areEquals(r.key,t))return r}},s.prototype.getOrCreateGroup=function(t){for(var e=0,n=this.items;e<n.length;e++){var r=n[e];if(this._keyComparer.areEquals(r.key,t))return r}var o={key:t,items:new i};return this.items.push(o),o},s);function s(t,e){t=o.call(this,t)||this;return t._keyComparer=e||new l,t}t.GroupedCollection=a;var l=(c.prototype.areEquals=function(t,e){return this.objectPropertyEquals(t,e)},c.prototype.objectEquals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0,i=n;o<i.length;o++){var a=i[o],s=r.indexOf(a);if(s<0)return!1;r.splice(s,1)}if(0<r.length)return!1;for(var l=0,c=n;l<c.length;l++){a=c[l];if(!this.objectPropertyEquals(t[a],e[a]))return!1}return!0},c.prototype.objectPropertyEquals=function(t,e){return typeof t==typeof e&&("object"==typeof t&&"object"==typeof e?null===t&&null===e||null!==t&&null!==e&&this.objectEquals(t,e):t===e)},c);function c(){}t.DefaultGroupKeyComparer=l}(t.Utilities||(t.Utilities={}))}(DevGuild=DevGuild||{}),function(t){var e;function n(t){this._root=t,this._node=$(this._root)}t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={}),n.prototype.isShown=function(){return this._root.classList.contains("show")},n.prototype.showAsync=function(){var n=this;return new Promise(function(e,t){n._node.one("shown.bs.collapse",function(t){e()}),n._node.collapse("show")})},n.prototype.hideAsync=function(){var n=this;return new Promise(function(e,t){n._node.one("hidden.bs.collapse",function(t){e()}),n._node.collapse("hide")})},e=n,t.Collapsible=e}(DentalDrill=DentalDrill||{}),function(t){var e,n;function r(t){var e=this;this._show=new n,this._shown=new n,this._hide=new n,this._hidden=new n,this._root=t,this._menu=t.querySelector(".dropdown-menu"),this._node=$(t),this._node.on("show.bs.dropdown",function(t){e._show.raise(e,t)}),this._node.on("shown.bs.dropdown",function(t){e._shown.raise(e,t)}),this._node.on("hide.bs.dropdown",function(t){e._hide.raise(e,t)}),this._node.on("hidden.bs.dropdown",function(t){e._hidden.raise(e,t)})}t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={}),n=DevGuild.Utilities.EventHandler,Object.defineProperty(r.prototype,"onShow",{get:function(){return this._show},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShown",{get:function(){return this._shown},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHide",{get:function(){return this._hide},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHidden",{get:function(){return this._hidden},enumerable:!1,configurable:!0}),r.prototype.isShown=function(){return this._root.classList.contains("show")},r.prototype.show=function(){var n=this;return this.isShown()?new Promise(function(t,e){return t()}):new Promise(function(e,t){n._node.one("shown.bs.dropdown",function(t){e()}),n._node.dropdown("toggle")})},r.prototype.hide=function(){var n=this;return this.isShown()?new Promise(function(e,t){n._node.one("hidden.bs.dropdown",function(t){e()}),n._node.dropdown("toggle")}):new Promise(function(t,e){return t()})},r.prototype.toggle=function(){return this.isShown()?this.hide():this.show()},r.prototype.preventContentClickHide=function(){var n=this;this._node.on("hide.bs.dropdown",function(t){if(t.clickEvent)for(var e=t.clickEvent.target;e&&e!==document.body;){if(e===n._menu)return void t.preventDefault();e=e.parentElement}})},e=r,t.Dropdown=e}(DentalDrill=DentalDrill||{}),function(t){var n;t=t.CRM||(t.CRM={}),n=t.Controls||(t.Controls={}),$(function(){$(document).on("click",".dropdown-submenu > a",function(t){t.preventDefault();var e=$(t.target);e.next(".dropdown-menu").hasClass("show")?$(".dropdown-submenu .dropdown-menu").removeClass("show"):($(".dropdown-submenu .dropdown-menu").removeClass("show"),e.next(".dropdown-menu").addClass("show")),t.stopPropagation()}),$(document).on("hidden.bs.dropdown",function(t){$(".dropdown-menu.show").removeClass("show")}),$(".dropdown-submenu").each(function(t,e){e=$(e).closest(".dropdown");0<e.length&&new n.Dropdown(e[0]).preventContentClickHide()})})}(DentalDrill=DentalDrill||{}),function(t){(t=t.CRM||(t.CRM={})).Controls||(t.Controls={}),$(function(){$(document).on("click",".image-uploader-multiple__previews__preview__remove",function(t){var e=$(t.target),n=e.closest(".image-uploader-multiple__previews__preview");0===n.length||(t=n.attr("data-id"))&&(0===(e=e.closest(".image-uploader-multiple")).length||0!==(t=e.find(".image-uploader-multiple__ids input.image-uploader-multiple__ids__id[value='"+t+"']")).length&&(n.remove(),t.remove()))})})}(DentalDrill=DentalDrill||{}),function(t){var e;function n(){this._max=7,this._value=0,this._danger=!1,this._overrides=[],this._counts=[]}t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={}),Object.defineProperty(n.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){if(t<0||t>this._max)throw new Error("Invalid value");this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"danger",{get:function(){return this._danger},set:function(t){this._danger=t},enumerable:!1,configurable:!0}),n.prototype.getOverride=function(t){if(t<1||t>this._max)throw new Error("Invalid index");t=this._overrides[t];return t||!1},n.prototype.setOverride=function(t,e){if(t<1||t>this._max)throw new Error("Invalid index");this._overrides[t]=e},n.prototype.getCount=function(t){if(t<1||t>this._max)throw new Error("Invalid index");t=this._counts[t];return t||0},n.prototype.setCount=function(t,e){if(t<1||t>this._max)throw new Error("Invalid index");this._counts[t]=e},n.prototype.render=function(){var t=this.createMainDiv();return t.appendChild(this.createProgress()),t.appendChild(this.createPoints()),t},n.prototype.createMainDiv=function(){var t=document.createElement("div");return t.classList.add("handpiece-status-indicator"),t.setAttribute("data-max",""+this._max),t.setAttribute("data-value",""+this._value),t.setAttribute("data-danger",this._danger?"True":"False"),t.setAttribute("data-override",this.computeOverrides()),t},n.prototype.computeOverrides=function(){for(var t="",e=1;e<=this._max;e++)this.getOverride(e)&&(t+=" "+e);return t.trim()},n.prototype.createProgress=function(){var t=document.createElement("div");return t.classList.add("progress"),t.classList.add("handpiece-status-indicator__progress"),t.appendChild(this.createProgressBar()),t},n.prototype.createProgressBar=function(){var t=document.createElement("div");return t.classList.add("progress-bar"),t},n.prototype.createPoints=function(){var t=document.createElement("div");t.classList.add("handpiece-status-indicator__points");for(var e=1;e<=this._max;e++)t.appendChild(this.createPoint(e));return t},n.prototype.createPoint=function(t){var e=document.createElement("div");e.classList.add("handpiece-status-indicator__points__point");t=this.getCount(t);return 0<t&&(e.innerText=t.toString()),e},e=n,t.HandpieceStatusIndicator=e}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e,n;function r(){var t=this;this._connected=new n,this._disconnected=new n,this._updated=new n,this._callbackUpdated=new n,this._isConnected=!1,this._connection=(new signalR.HubConnectionBuilder).withUrl("/hub/Notifications").build(),this._connection.on("ReceiveUpdate",function(){t._updated.raise(t,{})}),this._connection.on("CallbackUpdated",function(){t._callbackUpdated.raise(t,{})}),this._connection.onclose(function(){t._isConnected=!1,t._disconnected.raise(t,{})})}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).NotificationsFeed||(t.NotificationsFeed={}),n=DevGuild.Utilities.EventHandler,Object.defineProperty(r,"instance",{get:function(){return void 0===r._instance&&(r._instance=new r).connect(),r._instance},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"connected",{get:function(){return this._connected},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updated",{get:function(){return this._updated},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"callbackUpdated",{get:function(){return this._callbackUpdated},enumerable:!1,configurable:!0}),r.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._connection.start()];case 1:return t.sent(),this._isConnected=!0,this._connected.raise(this,{}),[2]}})})},t=r,e.NotificationsConnection=t}(DentalDrill=DentalDrill||{}),function(t){!function(e){var i,t;(t=i=e.NotificationType||(e.NotificationType={}))[t.Unknown=0]="Unknown",t[t.JobCreated=1]="JobCreated",t[t.JobEstimated=2]="JobEstimated",t[t.JobApprovedForRepair=3]="JobApprovedForRepair",t[t.JobRepairComplete=4]="JobRepairComplete",t[t.HandpieceStoreOrderCreated=5]="HandpieceStoreOrderCreated";var a=(Object.defineProperty(n.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),n.prototype.render=function(t){return this._template(t)},n);function n(t,e){this._type=t,this._template=e}e.NotificationsListViewTemplate=a;var r=(o.prototype.resolve=function(t){return this._map.get(t)},o);function o(t){this._list=[],this._map=new Map;for(var e=0;e<t.length;e++){var n=t[e];this._list.push(n),this._map.set(n.type,n)}}e.NotificationsListViewTemplateCollection=r;var s=(l.create=function(t){var e=new l(t);return t.data("NotificationsListView",e),e},l.prototype.createDataSource=function(t){var e=t.attr("data-page-size"),n=5;e&&(n=parseInt(e));t=t.attr("data-show-read");return new kendo.data.DataSource({type:"aspnetmvc-ajax",transport:{read:{url:"/Notifications/Read"+("True"===t?"?showRead=true":"")}},pageSize:n,page:1,serverPaging:!0,serverSorting:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0,schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"Id",fields:{Id:{type:"string"},CreatedOn:{type:"Date"},ReadOn:{type:"Date"},ResolvedOn:{type:"Date"},Type:{type:"number"},Payload:{type:"object"},Status:{type:"number"}}}},filter:[],sort:[{field:"CreatedOn",dir:"asc"}]})},l.prototype.createListView=function(t){t=t.find(".notifications-feed__list-view");return t.kendoListView({dataSource:this._dataSource,template:this.renderTemplate.bind(this),dataBound:function(t){0<t.sender.dataSource.data().length?t.sender.element.find(".no-data").remove():t.sender.element.append($('<div class="no-data">No Alerts</div>'))}}),t.data("kendoListView")},l.prototype.createPager=function(t){var e=t.find(".notifications-feed__pager");e.kendoPager({dataSource:this._dataSource,numeric:!1,info:!1,refresh:!0});var n,t=t.attr("data-link-full-version");return t&&"true"===t.toLowerCase()&&((n=$("<a></a>").attr("href","/Notifications").attr("class","k-link").attr("style","order: 100;").attr("title","Open Feed").append($("<span></span>").addClass("fas fa-fw fa-external-link-alt"))).on("click",function(t){window.location.href=n.attr("href")}),e.append(n)),e.data("kendoPager")},l.prototype.loadTemplates=function(t){var t=t.find(".notifications-feed__templates").find(".notifications-feed__templates__item"),o=[];return t.each(function(t,e){var n=i[e.getAttribute("data-type")],r=e.innerHTML,e=kendo.template(r);if(!(n&&r&&e))throw new Error("Failed to load template!");o.push(new a(n,e))}),new r(o)},l.prototype.renderTemplate=function(t){var e=i[i[t.Type]];return this._templates.resolve(e).render(t)},l);function l(t){var n=this;this._dataSource=this.createDataSource(t),this._listView=this.createListView(t),this._pager=this.createPager(t),this._templates=this.loadTemplates(t),e.NotificationsConnection.instance.updated.subscribe(function(t,e){n._dataSource.read()})}e.NotificationsListView=s,$(function(){$(".notifications-feed.notifications-feed--init").each(function(t,e){s.create($(e))})})}((t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={})).NotificationsFeed||(t.NotificationsFeed={}))}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(l){var t;!function(o){var e=l.CRM.Controls.Dropdown,n=(Object.defineProperty(t.prototype,"value",{get:function(){return this._root.classList.contains(this._className)},set:function(t){t&&!this._root.classList.contains(this._className)?this._root.classList.add(this._className):!t&&this._root.classList.contains(this._className)&&this._root.classList.remove(this._className)},enumerable:!1,configurable:!0}),t);function t(t,e){this._root=t,this._className=e}o.ClassToggler=n;var i=(Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this._root.innerText=t.toString()},enumerable:!1,configurable:!0}),r);function r(t){this._root=t,this._value=parseInt(this._root.innerText),isNaN(this._value)&&(this._value=void 0)}o.NotificationsIndicatorNumber=i;var a=(Object.defineProperty(s.prototype,"hasUnresolved",{get:function(){return this._hasUnresolved.value},set:function(t){this._hasUnresolved.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasUnread",{get:function(){return this._hasUnread.value},set:function(t){this._hasUnread.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"disconnected",{get:function(){return this._disconnected.value},set:function(t){this._disconnected.value=t},enumerable:!1,configurable:!0}),s.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadTotals()];case 1:return e=t.sent(),this._numberContainer.value=e.unread,[2]}})})},s.prototype.loadTotals=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,$.ajax({url:"/Notifications/Total",method:"POST"})];case 1:return[2,t.sent()]}})})},s);function s(t){var r=this;this._root=t,this._hasUnresolved=new n(this._root,"notifications-indicator--has-unresolved"),this._hasUnread=new n(this._root,"notifications-indicator--has-unread"),this._disconnected=new n(this._root,"notifications-indicator--disconnected"),this._dropdown=new e(t),this._numberContainer=new i(this._root.querySelector(".notifications-indicator__number"));t=o.NotificationsConnection.instance;t.connected.subscribe(function(t,e){r.disconnected=!1}),t.disconnected.subscribe(function(t,e){r.disconnected=!0}),t.updated.subscribe(function(t,e){return __awaiter(r,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadTotals()];case 1:return e=t.sent(),n=this._numberContainer.value,this._numberContainer.value=e.unread,(void 0===n||e.unread>n)&&!this._dropdown.isShown()&&(this.hasUnread=!0),[2]}})})}),this._dropdown.preventContentClickHide(),this._dropdown.onShown.subscribe(function(t,e){var n=r._root.querySelector(".notifications-feed");n&&((n=$(n)).data("NotificationsListView")||o.NotificationsListView.create(n)),r.hasUnread&&(r.hasUnread=!1)}),this.disconnected=!t.isConnected}o.NotificationsIndicator=a,$(function(){for(var t=document.querySelectorAll(".notifications-indicator"),e=0;e<t.length;e++){var n=t[e],r=new a(n);$(n).data("NotificationsIndicator",n),r.initialize()}})}((t=(t=l.CRM||(l.CRM={})).Controls||(t.Controls={})).NotificationsFeed||(t.NotificationsFeed={}))}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e,n,r;function o(t){var r=this;this._template=this.loadTemplate(t),this._dataSource=this.createDataSource(t),this._listView=this.createListView(t),this._pager=this.createPager(t),t.on("click",".callback__actions__read",function(n){return __awaiter(r,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return n.preventDefault(),e=$(n.target).closest(".callback").attr("data-id"),[4,fetch("/Callback/MarkAsRead/"+e,{method:"POST",credentials:"same-origin",cache:"no-cache",body:""})];case 1:return t.sent(),this._dataSource.read(),[2]}})})}),n.instance.callbackUpdated.subscribe(function(t,e){r._dataSource.read()})}e=(e=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).CallbackFeed||(e.CallbackFeed={}),n=t.CRM.Controls.NotificationsFeed.NotificationsConnection,o.create=function(t){var e=new o(t);return t.data("CallbackFeedListView",e),e},o.prototype.createDataSource=function(t){var e=t.attr("data-page-size"),n=5;e&&(n=parseInt(e));t=t.attr("data-show-read");return new kendo.data.DataSource({type:"aspnetmvc-ajax",transport:{read:{url:"/Callback/Read"+("True"===t?"?showRead=true":"")}},pageSize:n,page:1,serverPaging:!0,serverSorting:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0,schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"Id",fields:{Id:{type:"string"},CallDateTime:{type:"Date"},ClientId:{type:"string"},ClientName:{type:"string"},Note:{type:"string"}}}},filter:[],sort:[{field:"CallDateTime",dir:"asc"}]})},o.prototype.createListView=function(t){t=t.find(".callback-feed__list-view");return t.kendoListView({dataSource:this._dataSource,template:this._template,dataBound:function(t){0<t.sender.dataSource.data().length?t.sender.element.find(".no-data").remove():t.sender.element.append($('<div class="no-data">No Callbacks</div>'))}}),t.data("kendoListView")},o.prototype.createPager=function(t){var e=t.find(".callback-feed__pager");e.kendoPager({dataSource:this._dataSource,numeric:!1,info:!1,refresh:!0});var n,t=t.attr("data-link-full-version");return t&&"true"===t.toLowerCase()&&((n=$("<a></a>").attr("href","/Callback").attr("class","k-link").attr("style","order: 100;").attr("title","Open Feed").append($("<span></span>").addClass("fas fa-fw fa-external-link-alt"))).on("click",function(t){window.location.href=n.attr("href")}),e.append(n)),e.data("kendoPager")},o.prototype.loadTemplate=function(t){t=t.find(".callback-feed__template");return kendo.template(t.html())},r=o,e.CallbackFeedListView=r,$(function(){$(".callback-feed.callback-feed--init").each(function(t,e){r.create($(e))})})}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(c){var t;!function(o){var e=c.CRM.Controls.Dropdown,n=c.CRM.Controls.NotificationsFeed.NotificationsConnection,i=(Object.defineProperty(t.prototype,"value",{get:function(){return this._root.classList.contains(this._className)},set:function(t){t&&!this._root.classList.contains(this._className)?this._root.classList.add(this._className):!t&&this._root.classList.contains(this._className)&&this._root.classList.remove(this._className)},enumerable:!1,configurable:!0}),t);function t(t,e){this._root=t,this._className=e}o.ClassToggler=i;var a=(Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this._root.innerText=t.toString()},enumerable:!1,configurable:!0}),r);function r(t){this._root=t,this._value=parseInt(this._root.innerText),isNaN(this._value)&&(this._value=void 0)}o.CallbackIndicatorNumber=a;var s=(Object.defineProperty(l.prototype,"hasUnresolved",{get:function(){return this._hasUnresolved.value},set:function(t){this._hasUnresolved.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"hasUnread",{get:function(){return this._hasUnread.value},set:function(t){this._hasUnread.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"disconnected",{get:function(){return this._disconnected.value},set:function(t){this._disconnected.value=t},enumerable:!1,configurable:!0}),l.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadTotals()];case 1:return e=t.sent(),this._numberContainer.value=e.new,[2]}})})},l.prototype.loadTotals=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,fetch("/Callback/Total",{method:"POST",credentials:"same-origin",cache:"no-cache",body:""})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}})})},l);function l(t){var r=this;this._root=t,this._hasUnresolved=new i(this._root,"callback-indicator--has-unresolved"),this._hasUnread=new i(this._root,"callback-indicator--has-unread"),this._disconnected=new i(this._root,"callback-indicator--disconnected"),this._dropdown=new e(t),this._numberContainer=new a(this._root.querySelector(".callback-indicator__number"));t=n.instance;t.connected.subscribe(function(t,e){r.disconnected=!1}),t.disconnected.subscribe(function(t,e){r.disconnected=!0}),t.callbackUpdated.subscribe(function(t,e){return __awaiter(r,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadTotals()];case 1:return e=t.sent(),n=this._numberContainer.value,this._numberContainer.value=e.new,(void 0===n||e.new>n)&&!this._dropdown.isShown()&&(this.hasUnread=!0),[2]}})})}),this._dropdown.preventContentClickHide(),this._dropdown.onShown.subscribe(function(t,e){var n=r._root.querySelector(".callback-feed");n&&((n=$(n)).data("CallbackFeedListView")||o.CallbackFeedListView.create(n)),r.hasUnread&&(r.hasUnread=!1)}),this.disconnected=!t.isConnected}o.CallbackIndicator=s,$(function(){for(var t=document.querySelectorAll(".callback-indicator"),e=0;e<t.length;e++){var n=t[e],r=new s(n);$(n).data("CallbackIndicator",n),r.initialize()}})}((t=(t=c.CRM||(c.CRM={})).Controls||(t.Controls={})).CallbackFeed||(t.CallbackFeed={}))}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e;function n(){}t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={}),n.valueMapper=function(l){return __awaiter(this,void 0,void 0,function(){var e,n,r,o,i,a,s;return __generator(this,function(t){switch(t.label){case 0:if(e=[],"string"==typeof l.value)e.push(l.value);else if("object"==typeof l.value&&Array.isArray(l.value))for(n=0;n<l.value.length;n++)e.push(l.value[n]);for(r=new FormData,o=0,i=e;o<i.length;o++)a=i[o],r.append("ids",a);return[4,$.ajax({url:"/Jobs/ClientsResolve",method:"POST",data:{ids:e}})];case 1:return s=t.sent(),l.success(s),[2]}})})},e=n,t.ClientSelectorControl=e}(DentalDrill=DentalDrill||{}),function(t){var n;function e(t){var n=this;this._root=t,this._root.on("click",".date-range-selector__item",function(t){var e=$(t.target),t=n.parseRangeDate(e.attr("data-range-from")),e=n.parseRangeDate(e.attr("data-range-to"));n.applyRange(t,e)}),this._targetFrom=$(t.attr("data-range-target-from")),this._targetTo=$(t.attr("data-range-target-to")),this._defaultFrom=this.parseRangeDate(t.attr("data-range-default-from")),this._defaultTo=this.parseRangeDate(t.attr("data-range-default-to")),this._root.data("DateRangeSelector",this)}t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={}),e.prototype.reset=function(){this.applyRange(this._defaultFrom,this._defaultTo)},e.prototype.applyRange=function(n,r){this._targetFrom.each(function(t,e){$(e).data("kendoDatePicker").value(n)}),this._targetTo.each(function(t,e){$(e).data("kendoDatePicker").value(r)})},e.prototype.parseRangeDate=function(t){t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(t);if(t&&3<t.length)return new Date(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]));throw new Error("Invalid date")},n=e,t.DateRangeSelector=n,$(function(){$(".date-range-selector[data-init='true']").each(function(t,e){new n($(e))})})}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(t){var h=(e.prototype.increment=function(t){if(this._map.has(t)){var e=this._map.get(t)+1;return this._map.set(t,e),e}return this._map.set(t,1),1},e.prototype.count=function(t){return this._map.has(t)?this._map.get(t):0},e);function e(){this._map=new Map}var n=(r.prototype.activate=function(){this._root.removeClass("multi-select-toggler__item--partial"),this._root.addClass("multi-select-toggler__item--active")},r.prototype.deactivate=function(){this._root.removeClass("multi-select-toggler__item--partial"),this._root.removeClass("multi-select-toggler__item--active")},r.prototype.partial=function(){this._root.addClass("multi-select-toggler__item--partial"),this._root.removeClass("multi-select-toggler__item--active")},r);function r(t){this._root=t,this._root.data("MultiSelectTogglerItem",this)}t.MultiSelectTogglerItem=n;var o,i=(__extends(a,o=n),Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),a);function a(t,e){t=o.call(this,t)||this;return t._id=e,t}t.MultiSelectTogglerSpecificItem=i;var s=(l.prototype.initSelectAll=function(t){var r=this,t=t.find(".multi-select-toggler__item[data-toggle-all='true']");if(0!==t.length)return t.on("click",function(t){var e,n;r.getAllActivated()?r._multiSelect.value([]):(n=r._multiSelect.dataSource.data(),e=r._multiSelect.options.dataValueField,n=n.map(function(t){return t[e]}),r._multiSelect.value(n)),r.handleMultiSelectChange()}),new n(t)},l.prototype.initSpecific=function(t){var s=this,t=t.find(".multi-select-toggler__item[data-toggle-id]"),n=[];return t.each(function(t,e){var e=$(e),a=e.attr("data-toggle-id");e.on("click",function(t){if(s.getAllActivatedOf(a)){var n=s.getAllIdsOf(a),e=(r=s._multiSelect.value()).filter(function(e){return n.every(function(t){return t!==e})});s._multiSelect.value(e)}else{for(var e=s.getAllIdsOf(a),r=s._multiSelect.value(),o=0,i=e;o<i.length;o++)!function(e){r.every(function(t){return t!==e})&&r.push(e)}(i[o]);s._multiSelect.value(r)}s.handleMultiSelectChange()}),n.push(new i(e,a))}),n},l.prototype.getAllIds=function(){for(var t=[],e=this._multiSelect.dataSource.data(),n=this._multiSelect.options.dataValueField,r=0;r<e.length;r++){var o=e[r];t.push(o[n])}return t},l.prototype.getAllIdsOf=function(t){for(var e=[],n=this._multiSelect.dataSource.data(),r=this._multiSelect.options.dataValueField,o=0;o<n.length;o++){var i=n[o];i[this._propertyName]===t&&e.push(i[r])}return e},l.prototype.getAllActivated=function(){for(var t=0,n=0,r=this._multiSelect.value(),o=this.getAllIds(),e=0;e<o.length;e++)!function(e){t++,r.some(function(t){return t===o[e]})&&n++}(e);return 0<t&&t===n||0<t&&n<t&&void 0},l.prototype.getAllActivatedOf=function(t){for(var n=0,r=0,o=this._multiSelect.value(),i=this.getAllIdsOf(t),e=0;e<i.length;e++)!function(e){n++,o.some(function(t){return t===i[e]})&&r++}(e);return 0<n&&n===r||0<n&&r<n&&void 0},l.prototype.handleMultiSelectChange=function(){var t=this._multiSelect.value();if(t&&0<t.length){for(var n=this._multiSelect.dataSource.data(),r=new h,o=new h,i=0;i<n.length;i++)!function(){var e=n[i];r.increment(e.StateId),t.some(function(t){return t===e.Id})&&o.increment(e.StateId)}();for(var e=!1,a=!1,s=0,l=this._toggleItems;s<l.length;s++){var c,u=l[s],p=r.count(u.id);0!==p&&((c=o.count(u.id))===p?(u.activate(),e=!0):a=0<c&&c<p?(u.partial(),e=!0):(u.deactivate(),!0))}this._selectAllItem&&(e&&a?this._selectAllItem.partial():e?this._selectAllItem.activate():this._selectAllItem.deactivate())}else{this._selectAllItem.deactivate();for(var f=0,d=this._toggleItems;f<d.length;f++)(u=d[f]).deactivate()}},l);function l(t){var e=this;this._root=t;var n=$(t.attr("data-target"));this._multiSelect=n.data("kendoMultiSelect"),this._propertyName=t.attr("data-property"),this._selectAllItem=this.initSelectAll(t),this._toggleItems=this.initSpecific(t),this._multiSelect.bind("change",function(t){e.handleMultiSelectChange()}),this.handleMultiSelectChange()}t.MultiSelectToggler=s,$(function(){$(".multi-select-toggler[data-init='true']").each(function(t,e){e=$(e),new s(e)})})}((t=t.CRM||(t.CRM={})).Controls||(t.Controls={}))}(DentalDrill=DentalDrill||{}),function(t){var e,n;function r(t){var e=this;this._changed=new n,this._root=t,this._active=t.hasClass("toggle-button--active"),this._root.on("click",function(){return e.toggle()})}t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={}),n=DevGuild.Utilities.EventHandler,Object.defineProperty(r.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changed",{get:function(){return this._changed},enumerable:!1,configurable:!0}),r.prototype.activate=function(){this._active=!0,this._root.addClass("toggle-button--active"),this._changed.raise(this,this._active)},r.prototype.deactivate=function(){this._active=!1,this._root.removeClass("toggle-button--active"),this._changed.raise(this,this._active)},r.prototype.toggle=function(){this.active?this.deactivate():this.activate()},e=r,t.ToggleButton=e}(DentalDrill=DentalDrill||{}),function(t){!function(t){var e=DevGuild.Utilities.EventHandler,o=(Object.defineProperty(n.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),n.prototype.activate=function(){this._active=!0,this._root.addClass("toggle-list__item--active")},n.prototype.deactivate=function(){this._active=!1,this._root.removeClass("toggle-list__item--active")},n);function n(t){this._root=t,this._key=t.attr("data-key"),this._active=t.hasClass("toggle-list__item--active"),t.data("ToggleListItem",this)}t.ToggleListItem=o;var r=(Object.defineProperty(i.prototype,"selectionChanged",{get:function(){return this._selectionChanged},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._items.filter(function(t){return t.active}).map(function(t){return t.key})},enumerable:!1,configurable:!0}),i.prototype.isToggled=function(e){return this._items.some(function(t){return t.active&&t.key===e})},i);function i(t){var r=this;this._items=[],this._selectionChanged=new e,this._root=t,this._root.find(".toggle-list__item").each(function(t,e){var e=$(e),n=new o(e);e.on("click",function(t){n.active?n.deactivate():n.activate(),r._selectionChanged.raise(r,r.selected)}),r._items.push(n)}),t.data("ToggleList",this)}t.ToggleList=r,$(function(){$(".toggle-list[data-init='true']").each(function(t,e){new r($(e))})})}((t=t.CRM||(t.CRM={})).Controls||(t.Controls={}))}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e;function n(t){this._page=$('<div class="pdf-report__page pdf-report__page--size-a4"></div>'),t.append(this._page)}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).PdfReports||(t.PdfReports={}),n.prototype.appendJQuery=function(t){this._page.append(t)},n.prototype.appendHTML=function(t){this._page.append($(t))},n.prototype.appendText=function(t){this._page.append(document.createTextNode(t))},n.prototype.exportGroups=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,kendo.drawing.drawDOM(this._page,{})];case 1:return[2,[t.sent()]]}})})},n.prototype.removeHeightOverflow=function(){var t=this._page.height(),e=0,n=!1,r=this._page.children();if(r.length<=1)return[];for(var o=[],i=0;i<r.length;i++){var a=r[i],s=a.scrollHeight;n||t<e+s?(n=!0,o.push(a)):e+=s}for(i=0;i<o.length;i++)o[i].parentElement.removeChild(o[i]);return o},n.prototype.usedHeight=function(){for(var t=this._page.height(),e=0,n=this._page.children(),r=0;r<n.length;r++){var o=n[r].scrollHeight;if(t<e+o)return t;e+=o}return e},n.prototype.remainingHeight=function(){for(var t=this._page.height(),e=0,n=this._page.children(),r=0;r<n.length;r++){var o=n[r].scrollHeight;if(t<e+o)return 0;e+=o}return t-e},n.prototype.remove=function(){this._page.remove()},t=n,e.PdfPageBuilder=t}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var n;function e(){var e=this;this._pages=[],this._fileName="Report.pdf",this._windowWrapper=$('<div class="pdf-report pdf-report__window"></div>'),this._windowWrapper.kendoWindow({width:"90%",height:"90%",title:"Report",actions:["close"],modal:!0,visible:!1,refresh:function(t){t.sender.center()},open:function(t){t.sender.center()}}),this._window=this._windowWrapper.data("kendoWindow"),this._wrapper=$('<div class="pdf-report__wrapper"></div>').appendTo(this._windowWrapper),this._toolbar=$('<div class="pdf-report__toolbar"></div>').appendTo(this._wrapper),this._toolbarExportButton=$('<button type="button" class="pdf-report__toolbar__button btn btn-secondary btn-sm"><span class="fas fa-fw fa-file-pdf"></span> Save as PDF</button>').appendTo(this._toolbar),this._toolbarExportButton.on("click",function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.saveAsPdf(this._fileName)];case 1:return t.sent(),[2]}})})}),this._containerWrapper=$('<div class="pdf-report__container-wrapper"></div>').appendTo(this._wrapper),this._container=$('<div class="pdf-report__container"></div>').appendTo(this._containerWrapper)}t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={}),n=t.PdfReports||(t.PdfReports={}),e.prototype.open=function(){this._window.open()},e.prototype.addPage=function(t){var e=new n.PdfPageBuilder(this._container);return t&&t(e),this._pages.push(e),e},e.prototype.popPage=function(){this._pages.pop().remove()},e.prototype.lastPage=function(){return 0<this._pages.length?this._pages[this._pages.length-1]:void 0},Object.defineProperty(e.prototype,"fileName",{get:function(){return this._fileName},set:function(t){this._fileName=t},enumerable:!1,configurable:!0}),e.prototype.saveAsPdf=function(s){return __awaiter(this,void 0,void 0,function(){var e,n,r,o,i,a;return __generator(this,function(t){switch(t.label){case 0:e=new kendo.drawing.Group({pdf:{paperSize:"A4",margin:"0cm"}}),a=0,n=this._pages,t.label=1;case 1:return a<n.length?[4,n[a].exportGroups()]:[3,4];case 2:for(n=t.sent(),r=0,o=n;r<o.length;r++)i=o[r],e.children.push(i);t.label=3;case 3:return a++,[3,1];case 4:return[4,kendo.drawing.exportPDF(e,{multiPage:!0})];case 5:return a=t.sent(),kendo.saveAs({dataURI:a,fileName:s}),[2]}})})},t=e,n.PdfReportBuilder=t}(DentalDrill=DentalDrill||{}),function(t){var e;function n(t){this._builder=t,this._activePage=this._builder.addPage()}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).PdfReports||(t.PdfReports={}),Object.defineProperty(n.prototype,"activePage",{get:function(){return this._activePage},enumerable:!1,configurable:!0}),n.prototype.addNode=function(t){this._activePage.appendJQuery(t),this.fixOverflow()},n.prototype.nextPage=function(){this._activePage=this._builder.addPage()},n.prototype.popPage=function(){this._builder.popPage(),this._activePage=this._builder.lastPage()},n.prototype.addRow=function(t){if("object"==typeof t){var e=$('<div class="row"></div>'),n=$('<div class="col-12"></div>').appendTo(e);if(Array.isArray(t))for(var r=t,o=0;o<r.length;o++)n.append(r[o]);else n.append(t);this.addNode(e)}},n.prototype.addHeading=function(t,e){if(t<1||6<t)throw new Error("invalid Heading Level");this.addRow($("<h"+t+"></h"+t+">").text(e))},n.prototype.remainingHeight=function(){return this._activePage.remainingHeight()},n.prototype.fixOverflow=function(){for(var t=this._activePage.removeHeightOverflow();0<t.length;){this.nextPage();for(var e=0;e<t.length;e++)this._activePage.appendHTML(t[e]);t=this._activePage.removeHeightOverflow()}},t=n,e.PdfReportFlowWriter=t}(DentalDrill=DentalDrill||{}),function(t){var e;function n(t,e,n){this._title=t,this._width=e,this._formatter=n}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).Reporting||(t.Reporting={}),Object.defineProperty(n.prototype,"title",{get:function(){return this._title},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),n.prototype.setFormatter=function(t){this._formatter=t},n.prototype.format=function(t){try{return this._formatter(t)}catch(t){return""}},t=n,e.ReportTableColumn=t}(DentalDrill=DentalDrill||{}),function(t){var r,e;function n(){this._columnGroups=[],this._columns=[],this._headerRowFormatted=new e,this._headerCellFormatted=new e,this._dataRowFormatted=new e,this._dataCellFormatted=new e}t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={}),r=t.Reporting||(t.Reporting={}),e=DevGuild.Utilities.EventHandler,Object.defineProperty(n.prototype,"columns",{get:function(){return this._columns},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){this._rowHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"headerRowFormatted",{get:function(){return this._headerRowFormatted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"headerCellFormatted",{get:function(){return this._headerCellFormatted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataRowFormatted",{get:function(){return this._dataRowFormatted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataCellFormatted",{get:function(){return this._dataCellFormatted},enumerable:!1,configurable:!0}),n.prototype.addColumn=function(t,e,n){n=new r.ReportTableColumn(t,e,n);this._columns.push(n)},n.prototype.groupLastColumns=function(t,e){var n=this._columns.length-e;this._columnGroups.push({title:t,start:n,count:e})},n.prototype.setData=function(t,e){this._items=t,e&&this._items.sort(e)},n.prototype.measureWidth=function(t,e){for(var n=0,r=0;r<e;r++)n+=this._columns[t+r].width;return n},n.prototype.measureHeight=function(t,e){var n=1;return 0<this._columnGroups.length&&n++,(e+n)*this._rowHeight},n.prototype.renderFragment=function(t,e,n,r){for(var o=document.createElement("table"),i=document.createElement("colgroup"),a=0;a<e;a++){var s=this._columns[t+a],l=document.createElement("col");l.style.width=s.width+"px",i.appendChild(l)}o.appendChild(i);var c=o.createTHead(),u=[];if(0<this._columnGroups.length)for(var p=c.insertRow(),f=void 0,a=0;a<e;a++){var s=this._columns[t+a],d=this.findGroup(t+a);d?d!==f&&(f=d,(h=document.createElement("th")).colSpan=this.computeSpan(d.start,d.count,t,e),(m=document.createElement("div")).appendChild(document.createTextNode(d.title)),h.appendChild(m),p.appendChild(h)):(f=void 0,(h=document.createElement("th")).rowSpan=2,(m=document.createElement("div")).appendChild(document.createTextNode(s.title)),h.appendChild(m),p.appendChild(h),u.push(t+a))}console.log(u);for(var h,_=c.insertRow(),a=0;a<e;a++)0<=u.indexOf(t+a)||(s=this._columns[t+a],h=document.createElement("th"),(m=document.createElement("div")).appendChild(document.createTextNode(s.title)),h.appendChild(m),_.appendChild(h),this.formatHeaderCell(_,h,t+a));this.formatHeaderRow(_);for(var g=o.createTBody(),a=0;a<r;a++){for(var v=this._items[n+a],y=g.insertRow(),b=0;b<e;b++){var m,s=this._columns[t+b],w=y.insertCell();(m=document.createElement("div")).appendChild(document.createTextNode(s.format(v))),w.appendChild(m),this.formatDataCell(y,w,v,t+b)}this.formatDataRow(y,v)}return o},n.prototype.findGroup=function(t){for(var e=0;e<this._columnGroups.length;e++){var n=this._columnGroups[e];if(t>=n.start&&t<n.start+n.count)return n}},n.prototype.computeSpan=function(t,e,n,r){for(var o=0,i=0;i<r;i++){var a=n+i;t<=a&&a<t+e&&o++}return o},n.prototype.formatHeaderRow=function(t){this._headerRowFormatted.raise(this,{row:t})},n.prototype.formatHeaderCell=function(t,e,n){this._headerCellFormatted.raise(this,{row:t,cell:e,columnIndex:n,column:this._columns[n]})},n.prototype.formatDataRow=function(t,e){this._dataRowFormatted.raise(this,{row:t,item:e})},n.prototype.formatDataCell=function(t,e,n,r){this._dataCellFormatted.raise(this,{row:t,item:n,cell:e,columnIndex:r,column:this._columns[r]})},t=n,r.ReportTable=t}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e,n,r;function o(t){return r.call(this,t)||this}e=t.CRM||(t.CRM={}),e=(n=e.Controls||(e.Controls={})).Reporting||(n.Reporting={}),n=t.CRM.Controls.PdfReports.PdfReportFlowWriter,__extends(o,r=n),o.prototype.addInsightsTotals=function(t,e){var o=$('<div class="row"></div>');e.find(".reports__insights__total").each(function(t,e){var n=$(e).find(".reports__insights__total__key").text(),r=$(e).find(".reports__insights__total__value").text(),e=$('<div class="reports__insights__total col text-center"></div>');$('<div class="reports__insights__total__value"></div>').text(r).appendTo(e),$('<div class="reports__insights__total__key"></div>').text(n).appendTo(e);o.append(e)}),t?(t=$('<div class="row"></div>'),$('<div class="col-12 reports__insights__total__caption text-center font-italic mt-2"></div>').appendTo(t),this.addRow([o,t])):this.addRow([o])},o.prototype.addCharts=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=JSON.parse(JSON.stringify(n.options));r.chartArea||(r.chartArea={}),r.chartArea.width=350,r.chartArea.height=280;n=$('<div class="chart chart__container col-8 offset-2"></div>');$('<div class="chart__host"></div>').appendTo(n).kendoChart(r),this.addRow(n)}},o.prototype.addTable=function(o){function t(t,e){t.classList.add("report-table"),e&&e(t),t=$(t),i.addRow(t)}function e(t){var e=o.items.length;if(e<=t)return console.log("Row from "+t+" count 0"),0;for(var n=i.activePage.remainingHeight(),r=1;t+r<e&&o.measureHeight(t,r+1)<=n;)r++;return console.log("Row from "+t+" count "+r),r}for(var i=this,n=[],r=0;r<o.columns.length;){for(var a=1;r+a<o.columns.length&&o.measureWidth(r,a)<530&&o.measureWidth(r,a+1)<530;)a++;n.push({start:r,count:a}),r+=a}var s=0;if(0===this.activePage.usedHeight()){for(var l=e(s),c=0;c<n.length;c++)t(o.renderFragment(n[c].start,n[c].count,s,l)),this.nextPage();for(l=e(s+=l);0<l;){for(c=0;c<n.length;c++)t(o.renderFragment(n[c].start,n[c].count,s,l)),this.nextPage();l=e(s+=l)}this.popPage()}else if(this.activePage.remainingHeight()<3*o.rowHeight){this.nextPage();for(l=e(s),c=0;c<n.length;c++)t(o.renderFragment(n[c].start,n[c].count,s,l)),this.nextPage();for(l=e(s+=l);0<l;){for(c=0;c<n.length;c++)t(o.renderFragment(n[c].start,n[c].count,s,l)),this.nextPage();l=e(s+=l)}this.popPage()}else{for(var u=this.activePage.usedHeight(),l=e(s),p=this,c=0;c<n.length;c++)!function(){var e=c;t(o.renderFragment(n[c].start,n[c].count,s,l),function(t){0<e&&(t.style.marginTop=u+"px")}),p.nextPage()}();for(l=e(s+=l);0<l;){for(c=0;c<n.length;c++)t(o.renderFragment(n[c].start,n[c].count,s,l)),this.nextPage();l=e(s+=l)}this.popPage()}},n=o,e.SurgeryReportFlowWriter=n}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(t){var e=(Object.defineProperty(n.prototype,"collection",{get:function(){return this._collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"host",{get:function(){return this._host},enumerable:!1,configurable:!0}),n.prototype.createHost=function(){var t=$("<div></div>").addClass("chart__host"),e=$("<div></div>").addClass("chart").addClass("chart__container").append(t);return this.afterHostCreated(t,e),this._collection.container.append(e),{host:t,container:e}},n.prototype.afterHostCreated=function(t,e){},n);function n(t){this._collection=t;var e=this.createHost(),t=e.host,e=e.container;this._host=t,this._container=e}t.ChartBase=e;var r,o=(__extends(i,r=e),i.prototype.override=function(t){return this._optionsOverride=t,this},i.prototype.initialize=function(t,e,n,r,o){n={title:{position:"bottom",text:t,font:"italic 1em sans-serif",margin:{top:-30}},legend:{visible:!1},chartArea:{background:""},seriesDefaults:{labels:{visible:!0,background:"transparent",template:r,format:n}},seriesColors:["#0c81c5","#c5dceb","#3aa2de","#d8ecf8","#1f6aa3","#054158"],series:[{type:"pie",startAngle:150,data:e}],tooltip:{visible:!0,format:n}};this._optionsOverride&&this._optionsOverride(n),this.host.kendoChart(n)},i.prototype.afterHostCreated=function(t,e){e.addClass("col-12 col-md-6 mt-3")},i);function i(t){return r.call(this,t)||this}t.PieChart=o;var a,s=(__extends(l,a=e),l.prototype.initialize=function(t,e,n,r,o){this.host.kendoChart({renderAs:"canvas",title:{position:"bottom",text:t,font:"italic 1em sans-serif"},axisDefaults:{labels:{font:"0.75em Aria, Helvetica, sans-serif"}},legend:{visible:!1},seriesDefaults:{type:"column",labels:{visible:!0,background:"transparent",template:r,format:n,font:"0.75em Aria, Helvetica, sans-serif"}},series:[{name:"Average Rating",data:e.map(function(t){return t.value}),color:"#4682b4"}],pannable:{lock:"y"},zoomable:{mousewheel:{lock:"y"},selection:{lock:"y"}},valueAxis:[{labels:{format:n},line:{visible:!1}}],categoryAxis:[{categories:e.map(function(t){return t.name}),labels:{rotation:"auto"},line:{visible:!1}}],tooltip:{visible:!0,format:n}})},l.prototype.afterHostCreated=function(t,e){e.addClass("col-12 col-md-6 mt-3")},l);function l(t){return a.call(this,t)||this}t.BarChart=s;var c,u=(__extends(p,c=e),p.prototype.initialize=function(t,e,n,r,o){this.host.kendoChart({renderAs:"canvas",title:{position:"bottom",text:t,font:"italic 1em sans-serif"},legend:{visible:!1},seriesDefaults:{type:"column",labels:{visible:!0,background:"transparent",template:r,format:n}},series:[{name:"Average Rating",data:e.map(function(t){return t.value}),color:"#4682b4"}],pannable:{lock:"y"},zoomable:{mousewheel:{lock:"y"},selection:{lock:"y"}},valueAxis:[{min:0,max:o,labels:{format:n},line:{visible:!1}}],categoryAxis:[{categories:e.map(function(t){return t.name}),labels:{rotation:"auto"},line:{visible:!1}}],tooltip:{visible:!0,format:n}})},p.prototype.afterHostCreated=function(t,e){e.addClass("col-12 col-md-6 mt-3")},p);function p(t){return c.call(this,t)||this}t.LimitedBarChart=u;var f,d=(__extends(h,f=e),h.prototype.initialize=function(t,e,n,r,o){this.host.kendoTreeMap({dataSource:{data:[{name:t,items:e}],schema:{model:{children:"items"}}},valueField:"value",textField:"name",colors:[["#0c81c5","#c5dceb"],["#3aa2de","#d8ecf8"],["#449000","#dae9cc"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f1b092"],["#9e0a61","#eccedf"]]});var i=this.host.data("kendoTreeMap");this.host.kendoTooltip({filter:".k-leaf,.k-treemap-title",position:"top",content:function(t){return i.dataItem(t.target.closest(".k-treemap-tile")).name}})},h.prototype.afterHostCreated=function(t,e){e.addClass("col-12 mt-3")},h);function h(t){return f.call(this,t)||this}t.TreeMapChart=d;var _,g=(__extends(v,_=e),v.prototype.initialize=function(t,e,n,r,o){this.host.kendoChart({renderAs:"canvas",title:{position:"bottom",text:t,font:"italic 1em sans-serif"},axisDefaults:{labels:{font:"0.75em Aria, Helvetica, sans-serif"},majorGridLines:{visible:!1},title:{font:"1em Aria, Helvetica, sans-serif"}},dataSource:{data:e},legend:{visible:!1},seriesDefaults:{type:"column",labels:{visible:!0,background:"transparent",template:r,format:n,font:"0.75em Aria, Helvetica, sans-serif"}},series:[{type:"horizontalWaterfall",field:"value",categoryField:"name",color:"#4682b4"}],pannable:{lock:"y"},zoomable:{mousewheel:{lock:"y"},selection:{lock:"y"}}})},v.prototype.afterHostCreated=function(t,e){e.addClass("col-12 col-md-6 mt-3")},v);function v(t){return _.call(this,t)||this}function y(t){this._charts=[],this._container=t}t.WaterfallChart=g,Object.defineProperty(y.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"charts",{get:function(){return this._charts},enumerable:!1,configurable:!0}),y.prototype.createPieChart=function(){var t=new o(this);return this._charts.push(t),t},y.prototype.createBarChart=function(){var t=new s(this);return this._charts.push(t),t},y.prototype.createLimitedBarChart=function(){var t=new u(this);return this._charts.push(t),t},y.prototype.createTreeMap=function(){var t=new d(this);return this._charts.push(t),t},y.prototype.createWaterfallChart=function(){var t=new g(this);return this._charts.push(t),t},e=y,t.ChartsCollectionContainer=e}((t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={})).Reporting||(t.Reporting={}))}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){!function(r){var t=(e.prototype.clear=function(){this._root.empty()},e.prototype.addFlatValuesAsync=function(n){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=$("<div></div>").addClass("row"),this._root.append(e),e=new o(e),[4,n(e)];case 1:return t.sent(),[2]}})})},e.prototype.addChartsAsync=function(n){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=$("<div></div>").addClass("row"),this._root.append(e),e=new r.ChartsCollectionContainer(e),[4,n(e)];case 1:return t.sent(),[2]}})})},e);function e(t){this._root=t}r.ReportInsightsContainer=t;var o=(n.prototype.addValue=function(t,e){e=$("<div></div>").addClass("reports__insights__total__value").text(e),t=$("<div></div>").addClass("reports__insights__total__key").text(t),t=$("<div></div>").addClass("col").addClass("reports__insights__total").addClass("text-center").append(e).append(t);this._root.append(t)},n);function n(t){this._root=t}r.ReportInsightsFlatValuesContainer=o}((t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={})).Reporting||(t.Reporting={}))}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){!function(t){var e=DevGuild.Utilities.EventHandler,n=(r.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this._mainControls.getGlobalFilters()];case 1:return e=t.sent(),[4,this._tabsCollection.applyGlobalFiltersToAll(e)];case 2:return t.sent(),[4,this._tabsCollection.initializeAll()];case 3:return t.sent(),[2]}})})},Object.defineProperty(r.prototype,"identifier",{get:function(){return this._identifier},enumerable:!1,configurable:!0}),r);function r(t){var n=this;this._root=t,this._identifier=this.loadIdentifier(t),this._mainControls=this.loadMainControls(t,this._identifier),this._tabsCollection=this.loadTabs(t,this._identifier,this._mainControls),this._mainControls.changed.subscribe(function(t,e){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._tabsCollection.applyGlobalFiltersToAll(e.globalFilters)];case 1:return t.sent(),[4,this._tabsCollection.initializeAll()];case 2:return t.sent(),[2]}})})})}t.ReportsPageBase=n;var o=function(){};function i(){this._changed=new e}t.ReportsPageIdentifierBase=o,Object.defineProperty(i.prototype,"changed",{get:function(){return this._changed},enumerable:!1,configurable:!0}),i.prototype.raiseChanged=function(t){this._changed.raise(this,{globalFilters:t})},n=i,t.ReportsPageMainControlsBase=n,o=function(){},t.ReportsPageTabCollectionBase=o,n=function(){},t.ReportsPageGlobalFiltersBase=n,n=function(){},t.ReportsPageTabBase=n;var a,o=(__extends(s,a=o),s.prototype.addTab=function(t){this._tabs.push(t)},s.prototype.applyGlobalFiltersToAll=function(r){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:e=0,n=this._tabs,t.label=1;case 1:return e<n.length?[4,n[e].applyGlobalFilters(r)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},s.prototype.initializeAll=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:e=0,n=this._tabs,t.label=1;case 1:return e<n.length?[4,n[e].initialize()]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},s);function s(){var t=null!==a&&a.apply(this,arguments)||this;return t._tabs=[],t}t.ReportsPageTabCollection=o}((t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={})).Reporting||(t.Reporting={}))}(DentalDrill=DentalDrill||{}),function(t){var e;function n(){}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).Reporting||(t.Reporting={}),n.getFirstItemFromGroup=function(t,e){if(t&&t.items&&0<t.items.length){t=t.items[0];if(t[e])return t;if(t.aggregates&&t.items)return this.getFirstItemFromGroup(t,e)}},n.getAllItemsFromGroup=function(t){var o=[];return function t(e){for(var n=0;n<e.items.length;n++){var r=e.items[n];r.aggregates&&r.items?t(r):o.push(r)}}(t),o},t=n,e.ReportsPageDataSourceGroupHelper=t}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e,r;function n(t,e){var n=r.call(this)||this;return n._from=t,n._to=e,n}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).Reporting||(t.Reporting={}),r=e.ReportsPageGlobalFiltersBase,__extends(n,r),Object.defineProperty(n.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),t=n,e.ReportsPageDateRangeGlobalFilters=t}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var n,e,r;function o(t){var e=r.call(this)||this;return e._dateRangeSelector=new n.DateRangeSelector(t.find(".reports__dates-range")),e._dateFrom=t.find("input.reports__dates-from").data("kendoDatePicker"),e._dateTo=t.find("input.reports__dates-to").data("kendoDatePicker"),e._buttonClear=t.find(".reports__clear"),e._buttonSearch=t.find(".reports__search"),e._buttonClear.on("click",function(t){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.clearFilters()];case 1:return t.sent(),e=this.raiseChanged,[4,this.getGlobalFilters()];case 2:return e.apply(this,[t.sent()]),[2]}})})}),e._buttonSearch.on("click",function(t){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this.raiseChanged,[4,this.getGlobalFilters()];case 1:return e.apply(this,[t.sent()]),[2]}})})}),e.setDatePickerValidation(e._dateFrom),e.setDatePickerValidation(e._dateTo),e}t=t.CRM||(t.CRM={}),n=t.Controls||(t.Controls={}),e=n.Reporting||(n.Reporting={}),r=e.ReportsPageMainControlsBase,__extends(o,r),Object.defineProperty(o.prototype,"dateRangeSelector",{get:function(){return this._dateRangeSelector},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dateFrom",{get:function(){return this._dateFrom},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dateTo",{get:function(){return this._dateTo},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"buttonClear",{get:function(){return this._buttonClear},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"buttonSearch",{get:function(){return this._buttonSearch},enumerable:!1,configurable:!0}),o.prototype.getGlobalFilters=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new e.ReportsPageDateRangeGlobalFilters(this._dateFrom.value(),this._dateTo.value())]})})},o.prototype.clearFilters=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},o.prototype.setDatePickerValidation=function(t){t.element.kendoValidator({rules:{isValidDate:function(t){return null!==kendo.parseDate(t.val())}},messages:{isValidDate:"Invalid date format"}})},t=o,e.ReportsPageDateRangeMainControls=t}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e,n;function r(){return null!==n&&n.apply(this,arguments)||this}e=(t=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={})).Reporting||(t.Reporting={}),n=e.ReportsPageTabBase,__extends(r,n),r.prototype.generateDateRange=function(t,e,n){function r(t,e){t=new Date(t.getTime());return t.setMonth(t.getMonth()+e),t}function o(t){t=new Date(t.getTime());return t.setDate(t.getDate()-t.getDay()),t}function i(t,e){for(var n=t.toString();n.length<e;)n="0"+n;return n}switch(n){case"Yearly":for(var a=t.getFullYear(),s=e.getFullYear(),l=[],c=a;c<=s;c++)l.push(c.toString());return l;case"Quarterly":for(s=e,l=[],c=a=new Date(t.getFullYear(),3*Math.floor(t.getMonth()/3),1);c<=s;c=r(c,3))l.push(c.getFullYear()+"-Q"+(Math.floor(c.getMonth()/3)+1));return l;case"Monthly":for(s=e,l=[],c=a=new Date(t.getFullYear(),t.getMonth(),1);c<=s;c=r(c,1))l.push(c.getFullYear()+"-"+(c.getMonth()+1));return l;case"Weekly":for(var s=e,l=[],c=a=o(t),u=(g=a,v=o(new Date(g.getFullYear(),0,1)),v=o(g).getTime()-v.getTime(),Math.floor(v/6048e5)+1),p=c;c<=s;h=c,_=1,(h=new Date(h.getTime())).setDate(h.getDate()+7*_),c=h,u++)p.getFullYear()!==c.getFullYear()&&(u=1,p=c),l.push(c.getFullYear()+"-W"+u);return l;case"Daily":for(s=e,l=[],c=a=t;c<=s;f=c,d=1,(f=new Date(f.getTime())).setDate(f.getDate()+d),c=f)l.push(c.getFullYear()+"-"+i(c.getMonth()+1,2)+"-"+i(c.getDate(),2));return l}var f,d,h,_,g,v},t=r,e.ReportsPageTabDateRangeBase=t}(DentalDrill=DentalDrill||{}),function(t){!function(p){var n=(t.sum=function(s){return function(a){return function(t){var e=""+s+a,n=p.ReportsPageDataSourceGroupHelper.getAllItemsFromGroup(t);if(0===n.length)return"";for(var r=0,o=0;o<n.length;o++){var i=n[o];void 0!==i[e]&&null!==i[e]&&(r+=i[e])}return 0===r?"":""+r.toFixed(0)}}},t.average=function(c,u){return function(l){return function(t){var e=""+c+l,n=""+u+l,r=p.ReportsPageDataSourceGroupHelper.getAllItemsFromGroup(t);if(0===r.length)return"";for(var o=0,i=0,a=0;a<r.length;a++){var s=r[a];void 0!==s[e]&&null!==s[e]&&void 0!==s[n]&&null!==s[n]&&(o+=s[n],i+=s[e]*s[n])}return 0===o||0===i?"":""+(i/o).toFixed(2)}}},t.averageFromSum=function(c,u){return function(l){return function(t){var e=""+c+l,n=""+u+l,r=p.ReportsPageDataSourceGroupHelper.getAllItemsFromGroup(t);if(0===r.length)return"";for(var o=0,i=0,a=0;a<r.length;a++){var s=r[a];void 0!==s[e]&&null!==s[e]&&void 0!==s[n]&&null!==s[n]&&(o+=s[n],i+=s[e])}return 0===o||0===i?"":""+(i/o).toFixed(2)}}},t.percent=function(c,u){return function(l){return function(t){var e=""+c+l,n=""+u+l,r=p.ReportsPageDataSourceGroupHelper.getAllItemsFromGroup(t);if(0===r.length)return"";for(var o=0,i=0,a=0;a<r.length;a++){var s=r[a];void 0!==s[e]&&null!==s[e]&&void 0!==s[n]&&null!==s[n]&&(o+=s[n],i+=s[e]*s[n])}return 0===o||0===i?"":(100*i/o).toFixed(2)+"%"}}},t);function t(){}p.ReportsPageGridColumnHeaderGroupings=n;var e=(r.prototype.handpiecesCount=function(t){var e={field:"HandpiecesCount",title:"Repairs",format:"{0:n0}",groupHeaderColumnTemplate:n.sum("HandpiecesCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.ratingAverage=function(t){var e={field:"RatingAverage",title:"Avg. Rating",format:"{0:n}",groupHeaderColumnTemplate:n.average("RatingAverage","HandpiecesCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.unrepairablePercent=function(t){var e={field:"UnrepairedPercent",title:"Unrep.",format:"{0:p2}",groupHeaderColumnTemplate:n.percent("UnrepairedPercent","HandpiecesCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.returnUnrepairedPercent=function(t){var e={field:"ReturnUnrepairedPercent",title:"Ret. Unrep.",format:"{0:p2}",groupHeaderColumnTemplate:n.percent("ReturnUnrepairedPercent","HandpiecesCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.turnaroundAverage=function(t){var e={field:"TurnaroundAverage",title:"Avg. Turnaround",format:"{0:2}",groupHeaderColumnTemplate:n.average("TurnaroundAverage","HandpiecesCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.warrantyCount=function(t){var e={field:"WarrantyCount",title:"Warranty",format:"{0:2}",groupHeaderColumnTemplate:n.sum("WarrantyCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.costSum=function(t){var e={field:"CostSum",title:"Cost",format:"{0:c0}",groupHeaderColumnTemplate:n.sum("CostSum")};return t&&"object"==typeof t&&$.extend(e,t),e},r.prototype.costAverage=function(t){var e={field:"CostAverage",title:"Avg. Cost",format:"{0:c0}",groupHeaderColumnTemplate:n.averageFromSum("CostSum","HandpiecesCount")};return t&&"object"==typeof t&&$.extend(e,t),e},r);function r(){}function o(){}p.ReportsPageGridHandpiecesColumns=e,Object.defineProperty(o,"handpieces",{get:function(){return o._handpieces},enumerable:!1,configurable:!0}),o._handpieces=new e,e=o,p.ReportsPageGridColumns=e}((t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={})).Reporting||(t.Reporting={}))}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e,r,o,i,a;function n(t,e){var n=o.call(this)||this;return n._pageIdentifier=t,n._tabRoot=e,n._reportFields=new a(e.find(".reports__tab__fields")),n._reportFields.selectionChanged.subscribe(function(t,e){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.initialize()];case 1:return t.sent(),[2]}})})}),n._dateAggregate=e.find("input.reports__tab__date-aggregate").data("kendoDropDownList"),n._dateAggregate.bind("change",function(t){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.initialize()];case 1:return t.sent(),[2]}})})}),n._globalFilters=void 0,n._dataSource=void 0,n._gridContainer=e.find(".reports__tab__grid-container"),n._grid=void 0,n._insightsToggle=new i(e.find(".reports__tab__insights")),n._insightsToggle.changed.subscribe(function(t,e){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.toggleInsights()];case 1:return t.sent(),[2]}})})}),n._insightsContainer=new r.ReportInsightsContainer(e.find(".reports__tab__insights-container")),e.find(".reports__tab__export__excel").on("click",function(t){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.exportExcel()];case 1:return t.sent(),[2]}})})}),e.find(".reports__tab__export__pdf").on("click",function(t){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.exportPdf()];case 1:return t.sent(),[2]}})})}),n}e=(e=t.CRM||(t.CRM={})).Controls||(e.Controls={}),r=e.Reporting||(e.Reporting={}),i=t.CRM.Controls.ToggleButton,a=t.CRM.Controls.ToggleList,o=r.ReportsPageTabDateRangeBase,__extends(n,o),Object.defineProperty(n.prototype,"reportFields",{get:function(){return this._reportFields},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"globalFilters",{get:function(){return this._globalFilters},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dateAggregate",{get:function(){return this._dateAggregate.value()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"insightsToggle",{get:function(){return this._insightsToggle},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"insightsContainer",{get:function(){return this._insightsContainer},enumerable:!1,configurable:!0}),n.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return[4,(e=this).initializeDataSource()];case 1:return e._dataSource=t.sent(),[4,(n=this).initializeGrid()];case 2:return n._grid=t.sent(),[4,this.toggleInsights()];case 3:return t.sent(),[2]}})})},n.prototype.exportExcel=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){throw new Error("Excel export is not implemented")})})},n.prototype.exportPdf=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){throw new Error("Pdf export is not implemented")})})},n.prototype.toggleInsights=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this._insightsContainer.clear(),this._insightsToggle.active?[4,this.initializeInsights()]:[2];case 1:return t.sent(),[2]}})})},n.prototype.initializeDataSource=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this._dataSource=void 0,[4,(e=this).createDataSource()];case 1:return e._dataSource=t.sent(),[2,this._dataSource]}})})},n.prototype.createDataSource=function(a){return __awaiter(this,void 0,void 0,function(){var e,n,r,o,i;return __generator(this,function(t){switch(t.label){case 0:return n={type:"aspnetmvc-ajax"},r={},[4,this.initializeDataSourceTransportRead()];case 1:return n.transport=(r.read=t.sent(),r),o={data:"Data",total:"Total",errors:"Errors"},i={},[4,this.initializeDataSourceFields(this.initializeDataSourceGroupFields())];case 2:return n.schema=(o.model=(i.fields=t.sent(),i),o),e=n,this.alterDataSourceOptions(e),a&&$.extend(!0,e,a),[4,(e=new kendo.data.DataSource(e)).read()];case 3:return t.sent(),[2,e]}})})},n.prototype.initializeDataSourceFields=function(f){return __awaiter(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l,c,u,p;return __generator(this,function(t){if(e=this._dateAggregate.value(),n=this.initializeDataSourceValueFields(),"EntirePeriod"===e)for(r=0,o=n;r<o.length;r++)l=o[r],f[l]={type:"number",from:l};else for(i=this.generateDateRange(this._globalFilters.from,this._globalFilters.to,e),a=0,s=n;a<s.length;a++)for(l=s[a],c=0,u=i;c<u.length;c++)p=u[c],f[l+"_"+p.replace(/-/g,"_")]={type:"number",from:l+'["'+p+'"]'};return[2,f]})})},n.prototype.alterDataSourceOptions=function(t){},n.prototype.initializeGrid=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l,c,u,p,f,d,h,_;return __generator(this,function(t){if(e=$("<div></div>"),this._gridContainer.empty(),this._gridContainer.append(e),n=this.initializeGridGroupColumns(),r=this._reportFields.selected,_=this.initializeGridValueColumns(),"EntirePeriod"===(o=this._dateAggregate.value()))for(i=0,a=_.filter(function(t){return 0<=r.indexOf(t.field)});i<a.length;i++)u=a[i],n.push({field:u.field,title:u.title,width:"125px",format:u.format,groupHeaderColumnTemplate:u.groupHeaderColumnTemplate?u.groupHeaderColumnTemplate(""):void 0});else for(s=this.generateDateRange(this._globalFilters.from,this._globalFilters.to,o),l=0,c=_.filter(function(t){return 0<=r.indexOf(t.field)});l<c.length;l++){for(u=c[l],p=[],f=0,d=s;f<d.length;f++)h=d[f],p.push({title:h,field:u.field+"_"+h.replace(/-/g,"_"),width:"125px",format:u.format,groupHeaderColumnTemplate:u.groupHeaderColumnTemplate?u.groupHeaderColumnTemplate("_"+h.replace(/-/g,"_")):void 0});n.push({title:u.title,columns:p})}return n.push({title:""}),_={dataSource:this._dataSource,columns:n,scrollable:!0,sortable:{mode:"multiple",allowUnsort:!0},noRecords:{template:"No data available"}},this.alterGridOptions(_),e.kendoGrid(_),[2,e.data("kendoGrid")]})})},n.prototype.alterGridOptions=function(t){},n.prototype.initializeInsights=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},n.prototype.applyGlobalFilters=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this._globalFilters=e,[2]})})},e=n,r.ReportsPageTabGridWithInsightsBase=e}(DentalDrill=DentalDrill||{});__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var e,n,r,o;function i(t,e){var n=r.call(this)||this;return n._pageIdentifier=t,n._tabRoot=e,n._reportGrids=new o(e.find(".reports__tab__grids-list")),n._reportGrids.selectionChanged.subscribe(function(t,e){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.initialize()];case 1:return t.sent(),[2]}})})}),n._globalFilters=void 0,n._gridsDefinitions=[],n._gridContainer=e.find(".reports__tab__grid-container"),e.find(".reports__tab__export__excel").on("click",function(t){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.exportExcel()];case 1:return t.sent(),[2]}})})}),e.find(".reports__tab__export__pdf").on("click",function(t){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.exportPdf()];case 1:return t.sent(),[2]}})})}),n}e=t.CRM||(t.CRM={}),e=(n=e.Controls||(e.Controls={})).Reporting||(n.Reporting={}),o=t.CRM.Controls.ToggleList,r=e.ReportsPageTabBase,__extends(i,r),Object.defineProperty(i.prototype,"pageIdentifier",{get:function(){return this._pageIdentifier},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"globalFilters",{get:function(){return this._globalFilters},enumerable:!1,configurable:!0}),i.prototype.applyGlobalFilters=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this._globalFilters=e,[2]})})},i.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r;return __generator(this,function(t){switch(t.label){case 0:this._gridContainer.empty(),e=0,r=this._gridsDefinitions,t.label=1;case 1:return e<r.length?(n=r[e],this._reportGrids.isToggled(n.key)?(r=$("<div></div>"),this._gridContainer.append(r),[4,n.gridConstructor(r)]):[3,3]):[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},i.prototype.exportExcel=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){throw new Error("Excel export is not implemented")})})},i.prototype.exportPdf=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){throw new Error("Pdf export is not implemented")})})},i.prototype.registerGridDefinition=function(t,e){this._gridsDefinitions.push({key:t,gridConstructor:e})},n=i,e.ReportsPageTabGridCollectionBase=n}(DentalDrill=DentalDrill||{});__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){!function(t){(e=t.GenericFlagState||(t.GenericFlagState={}))[e.NotSet=0]="NotSet",e[e.PartiallySet=50]="PartiallySet",e[e.Set=100]="Set";var e=(n.prototype.getState=function(n){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,fetch("/GenericFlags/GetValue?flagId="+encodeURIComponent(n),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(200!==(e=t.sent()).status)throw new Error("Invalid response status code");return[4,e.json()];case 2:if((e=t.sent())&&e.Flag&&e.Flag===n)return[2,e.State];throw new Error("Invalid response")}})})},n.prototype.setState=function(n,r){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,fetch("/GenericFlags/SetValue?flagId="+encodeURIComponent(n)+"&state="+r,{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(200!==(e=t.sent()).status)throw new Error("Invalid response status code");return[4,e.json()];case 2:if((e=t.sent())&&e.Flag&&e.Flag===n)return[2];throw new Error("Invalid response")}})})},n.prototype.bulkGetValue=function(s){return __awaiter(this,void 0,void 0,function(){var e,n,r,o,i,a;return __generator(this,function(t){switch(t.label){case 0:return[4,fetch("/GenericFlags/BulkGetValue",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({Flags:s})})];case 1:if(200!==(e=t.sent()).status)throw new Error("Invalid response status code");return[4,e.json()];case 2:if((n=t.sent())&&n.States&&"object"==typeof n.States){for(r=new Map,o=0,i=Object.keys(n.States);o<i.length;o++)a=i[o],r.set(a,n.States[a]);return[2,r]}throw new Error("Invalid response")}})})},n);function n(){}t.GenericFlagsApiClient=e}((t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={})).GenericFlag||(t.GenericFlag={}))}(DentalDrill=DentalDrill||{});var DentalDrill,__awaiter=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((l=l.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){var c;function u(t,e,n){this._api=new c.GenericFlagsApiClient,this._checkbox=t,this._flagId=e,this._changing=!1,this.applyState(n),this._checkbox.addEventListener("click",this.checkboxOnChange.bind(this))}t=(t=t.CRM||(t.CRM={})).Controls||(t.Controls={}),c=t.GenericFlag||(t.GenericFlag={}),u.initContainer=function(r){var t=this;if(!r)throw new Error("no container provided");var o=r.getAttribute("data-flag");if(!o)throw new Error("flag id is missing");r.innerHTML="",setTimeout(function(){return __awaiter(t,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return[4,(new c.GenericFlagsApiClient).getState(o)];case 1:return n=t.sent(),(e=r.appendChild(document.createElement("input"))).type="checkbox",e.classList.add("generic-flag"),e.classList.add("k-checkbox"),n=new u(e,o,n),e.__control=n,[2]}})})},0)},u.initContainers=function(t){var e=this;if(null==t||!Array.isArray(t))throw new Error("invalid containers collection");if(0!==t.length){for(var s=[],l=new Map,n=0,r=t;n<r.length;n++){var o=r[n],i=o.getAttribute("data-flag");if(!i)throw new Error("flag id is missing");o.innerHTML="",s.push(i),l.set(i,o)}setTimeout(function(){return __awaiter(e,void 0,void 0,function(){var e,n,r,o,i,a;return __generator(this,function(t){switch(t.label){case 0:return[4,(new c.GenericFlagsApiClient).bulkGetValue(s)];case 1:for(e=t.sent(),n=0,r=s;n<r.length;n++)o=r[n],i=l.get(o),null==(a=e.get(o))&&(a=c.GenericFlagState.NotSet),(i=i.appendChild(document.createElement("input"))).type="checkbox",i.classList.add("generic-flag"),i.classList.add("k-checkbox"),a=new u(i,o,a),i.__control=a;return[2]}})})})}},u.prototype.checkboxOnChange=function(t){var e=this;t.preventDefault(),t.stopPropagation(),this._changing||(this._changing=!0,setTimeout(function(){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),e=this.getNextState(),[4,this._api.setState(this._flagId,e)];case 1:return t.sent(),this.applyState(e),[3,3];case 2:return this._changing=!1,[7];case 3:return[2]}})})},0))},u.prototype.getNextState=function(){switch(this._state){case c.GenericFlagState.Set:return c.GenericFlagState.NotSet;case c.GenericFlagState.NotSet:case c.GenericFlagState.PartiallySet:default:return c.GenericFlagState.Set}},u.prototype.applyState=function(t){switch(this._state=t,this._state){case c.GenericFlagState.Set:this._checkbox.indeterminate=!1,this._checkbox.checked=!0;break;case c.GenericFlagState.PartiallySet:this._checkbox.checked=!1,this._checkbox.indeterminate=!0;break;case c.GenericFlagState.NotSet:default:this._checkbox.checked=!1,this._checkbox.indeterminate=!1}},t=u,c.GenericFlagControl=t}(DentalDrill=DentalDrill||{});