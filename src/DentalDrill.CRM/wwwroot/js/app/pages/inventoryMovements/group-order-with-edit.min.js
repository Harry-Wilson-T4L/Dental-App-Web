var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var HiddenInputList = /** @class */ (function () {
                        function HiddenInputList(root) {
                            this._root = root;
                        }
                        HiddenInputList.prototype.clear = function () {
                            this._root.innerHTML = "";
                        };
                        HiddenInputList.prototype.add = function (name, value) {
                            var input = document.createElement("input");
                            input.type = "hidden";
                            input.name = name;
                            input.value = value;
                            this._root.appendChild(input);
                        };
                        return HiddenInputList;
                    }());
                    Shared.HiddenInputList = HiddenInputList;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=HiddenInputList.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var HandpieceStatus;
                    (function (HandpieceStatus) {
                        HandpieceStatus[HandpieceStatus["None"] = 0] = "None";
                        HandpieceStatus[HandpieceStatus["Received"] = 10] = "Received";
                        HandpieceStatus[HandpieceStatus["BeingEstimated"] = 20] = "BeingEstimated";
                        HandpieceStatus[HandpieceStatus["WaitingForApproval"] = 30] = "WaitingForApproval";
                        HandpieceStatus[HandpieceStatus["TbcHoldOn"] = 31] = "TbcHoldOn";
                        HandpieceStatus[HandpieceStatus["NeedsReApproval"] = 32] = "NeedsReApproval";
                        HandpieceStatus[HandpieceStatus["EstimateSent"] = 35] = "EstimateSent";
                        HandpieceStatus[HandpieceStatus["BeingRepaired"] = 40] = "BeingRepaired";
                        HandpieceStatus[HandpieceStatus["WaitingForParts"] = 41] = "WaitingForParts";
                        HandpieceStatus[HandpieceStatus["TradeIn"] = 42] = "TradeIn";
                        HandpieceStatus[HandpieceStatus["ReadyToReturn"] = 50] = "ReadyToReturn";
                        HandpieceStatus[HandpieceStatus["ReturnUnrepaired"] = 51] = "ReturnUnrepaired";
                        HandpieceStatus[HandpieceStatus["SentComplete"] = 60] = "SentComplete";
                        HandpieceStatus[HandpieceStatus["Cancelled"] = 70] = "Cancelled";
                        HandpieceStatus[HandpieceStatus["Unrepairable"] = 71] = "Unrepairable";
                    })(HandpieceStatus = Shared.HandpieceStatus || (Shared.HandpieceStatus = {}));
                    var HandpieceStatusHelper = /** @class */ (function () {
                        function HandpieceStatusHelper() {
                        }
                        HandpieceStatusHelper.toDisplayString = function (value) {
                            switch (value) {
                                case HandpieceStatus.None:
                                    return "None";
                                case HandpieceStatus.Received:
                                    return "Received";
                                case HandpieceStatus.BeingEstimated:
                                    return "Being estimated";
                                case HandpieceStatus.WaitingForApproval:
                                    return "Estimate Complete";
                                case HandpieceStatus.TbcHoldOn:
                                    return "Tbc hold on";
                                case HandpieceStatus.NeedsReApproval:
                                    return "Needs approval";
                                case HandpieceStatus.EstimateSent:
                                    return "Estimate sent";
                                case HandpieceStatus.BeingRepaired:
                                    return "Being repaired";
                                case HandpieceStatus.WaitingForParts:
                                    return "Waiting for parts";
                                case HandpieceStatus.TradeIn:
                                    return "Trade-in";
                                case HandpieceStatus.ReadyToReturn:
                                    return "Ready to return";
                                case HandpieceStatus.ReturnUnrepaired:
                                    return "Return unrepaired";
                                case HandpieceStatus.SentComplete:
                                    return "Sent complete";
                                case HandpieceStatus.Cancelled:
                                    return "Cancelled";
                                case HandpieceStatus.Unrepairable:
                                    return "Unrepairable";
                            }
                        };
                        HandpieceStatusHelper.createDataSource = function () {
                            var items = [
                                HandpieceStatus.Received,
                                HandpieceStatus.BeingEstimated,
                                HandpieceStatus.WaitingForApproval,
                                HandpieceStatus.TbcHoldOn,
                                HandpieceStatus.NeedsReApproval,
                                HandpieceStatus.EstimateSent,
                                HandpieceStatus.BeingRepaired,
                                HandpieceStatus.WaitingForParts,
                                HandpieceStatus.TradeIn,
                                HandpieceStatus.ReadyToReturn,
                                HandpieceStatus.ReturnUnrepaired,
                                HandpieceStatus.SentComplete,
                                HandpieceStatus.Cancelled,
                                HandpieceStatus.Unrepairable,
                            ];
                            return new kendo.data.DataSource({
                                data: items.map(function (x) { return ({ name: HandpieceStatusHelper.toDisplayString(x), value: x }); })
                            });
                        };
                        return HandpieceStatusHelper;
                    }());
                    Shared.HandpieceStatusHelper = HandpieceStatusHelper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=HandpieceStatus.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementDirection;
                    (function (InventoryMovementDirection) {
                        InventoryMovementDirection[InventoryMovementDirection["Increase"] = 0] = "Increase";
                        InventoryMovementDirection[InventoryMovementDirection["Decrease"] = 1000] = "Decrease";
                    })(InventoryMovementDirection = Shared.InventoryMovementDirection || (Shared.InventoryMovementDirection = {}));
                    var InventoryMovementDirectionHelper = /** @class */ (function () {
                        function InventoryMovementDirectionHelper() {
                        }
                        InventoryMovementDirectionHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementDirection.Increase:
                                    return "Increase";
                                case InventoryMovementDirection.Decrease:
                                    return "Decrease";
                                default:
                                    throw new Error("Invalid movement direction");
                            }
                        };
                        return InventoryMovementDirectionHelper;
                    }());
                    Shared.InventoryMovementDirectionHelper = InventoryMovementDirectionHelper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementDirection.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementType;
                    (function (InventoryMovementType) {
                        InventoryMovementType[InventoryMovementType["Initial"] = 0] = "Initial";
                        InventoryMovementType[InventoryMovementType["Order"] = 1] = "Order";
                        InventoryMovementType[InventoryMovementType["Found"] = 2] = "Found";
                        InventoryMovementType[InventoryMovementType["MoveFromAnotherWorkshop"] = 100] = "MoveFromAnotherWorkshop";
                        InventoryMovementType[InventoryMovementType["EphemeralMissingRequiredQuantity"] = 500] = "EphemeralMissingRequiredQuantity";
                        InventoryMovementType[InventoryMovementType["Repair"] = 1000] = "Repair";
                        InventoryMovementType[InventoryMovementType["Lost"] = 1001] = "Lost";
                        InventoryMovementType[InventoryMovementType["RepairFragment"] = 1002] = "RepairFragment";
                        InventoryMovementType[InventoryMovementType["MoveToAnotherWorkshop"] = 1100] = "MoveToAnotherWorkshop";
                    })(InventoryMovementType = Shared.InventoryMovementType || (Shared.InventoryMovementType = {}));
                    var InventoryMovementCreateType;
                    (function (InventoryMovementCreateType) {
                        InventoryMovementCreateType[InventoryMovementCreateType["Order"] = 1] = "Order";
                        InventoryMovementCreateType[InventoryMovementCreateType["Found"] = 2] = "Found";
                        InventoryMovementCreateType[InventoryMovementCreateType["Lost"] = 1001] = "Lost";
                        InventoryMovementCreateType[InventoryMovementCreateType["MoveBetweenWorkshops"] = 5000] = "MoveBetweenWorkshops";
                        InventoryMovementCreateType[InventoryMovementCreateType["MoveFromAnotherWorkshop"] = 100] = "MoveFromAnotherWorkshop";
                        InventoryMovementCreateType[InventoryMovementCreateType["MoveToAnotherWorkshop"] = 1100] = "MoveToAnotherWorkshop";
                    })(InventoryMovementCreateType = Shared.InventoryMovementCreateType || (Shared.InventoryMovementCreateType = {}));
                    var InventoryMovementTypeHelper = /** @class */ (function () {
                        function InventoryMovementTypeHelper() {
                        }
                        InventoryMovementTypeHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementType.Initial:
                                    return "Initial";
                                case InventoryMovementType.Order:
                                    return "Order";
                                case InventoryMovementType.Found:
                                    return "Found";
                                case InventoryMovementType.MoveFromAnotherWorkshop:
                                    return "Move from another workshop";
                                case InventoryMovementType.EphemeralMissingRequiredQuantity:
                                    return "Pending Order";
                                case InventoryMovementType.Repair:
                                    return "Repair";
                                case InventoryMovementType.Lost:
                                    return "Lost";
                                case InventoryMovementType.RepairFragment:
                                    return "Repair (Partial)";
                                case InventoryMovementType.MoveToAnotherWorkshop:
                                    return "Move to another workshop";
                                default:
                                    throw new Error("Invalid movement type");
                            }
                        };
                        InventoryMovementTypeHelper.createDataSource = function () {
                            var items = [
                                InventoryMovementType.Initial,
                                InventoryMovementType.Order,
                                InventoryMovementType.Found,
                                InventoryMovementType.MoveFromAnotherWorkshop,
                                InventoryMovementType.EphemeralMissingRequiredQuantity,
                                InventoryMovementType.Repair,
                                InventoryMovementType.Lost,
                                InventoryMovementType.RepairFragment,
                                InventoryMovementType.MoveToAnotherWorkshop,
                            ];
                            return new kendo.data.DataSource({
                                data: items.map(function (x) { return ({ name: InventoryMovementTypeHelper.toDisplayString(x), value: x }); })
                            });
                        };
                        return InventoryMovementTypeHelper;
                    }());
                    Shared.InventoryMovementTypeHelper = InventoryMovementTypeHelper;
                    var InventoryMovementCreateTypeHelper = /** @class */ (function () {
                        function InventoryMovementCreateTypeHelper() {
                        }
                        InventoryMovementCreateTypeHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementCreateType.Order:
                                    return "Order";
                                case InventoryMovementCreateType.Found:
                                    return "Found";
                                case InventoryMovementCreateType.Lost:
                                    return "Lost";
                                case InventoryMovementCreateType.MoveBetweenWorkshops:
                                    return "Move between workshops";
                                case InventoryMovementCreateType.MoveFromAnotherWorkshop:
                                    return "Move from another workshop";
                                case InventoryMovementCreateType.MoveToAnotherWorkshop:
                                    return "Move to another workshop";
                                default:
                                    throw new Error("Invalid movement type");
                            }
                        };
                        return InventoryMovementCreateTypeHelper;
                    }());
                    Shared.InventoryMovementCreateTypeHelper = InventoryMovementCreateTypeHelper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementType.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementStatus;
                    (function (InventoryMovementStatus) {
                        InventoryMovementStatus[InventoryMovementStatus["Cancelled"] = 0] = "Cancelled";
                        InventoryMovementStatus[InventoryMovementStatus["Requested"] = 10] = "Requested";
                        InventoryMovementStatus[InventoryMovementStatus["Approved"] = 20] = "Approved";
                        InventoryMovementStatus[InventoryMovementStatus["Ordered"] = 30] = "Ordered";
                        InventoryMovementStatus[InventoryMovementStatus["Waiting"] = 40] = "Waiting";
                        InventoryMovementStatus[InventoryMovementStatus["Allocated"] = 90] = "Allocated";
                        InventoryMovementStatus[InventoryMovementStatus["Completed"] = 100] = "Completed";
                    })(InventoryMovementStatus = Shared.InventoryMovementStatus || (Shared.InventoryMovementStatus = {}));
                    var InventoryMovementStatusHelper = /** @class */ (function () {
                        function InventoryMovementStatusHelper() {
                        }
                        InventoryMovementStatusHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementStatus.Cancelled:
                                    return "Cancelled";
                                case InventoryMovementStatus.Requested:
                                    return "To be approved";
                                case InventoryMovementStatus.Approved:
                                    return "To be ordered";
                                case InventoryMovementStatus.Ordered:
                                    return "Ordered";
                                case InventoryMovementStatus.Waiting:
                                    return "Waiting";
                                case InventoryMovementStatus.Allocated:
                                    return "Allocated";
                                case InventoryMovementStatus.Completed:
                                    return "Completed";
                                default:
                                    throw new Error("Invalid movement status");
                            }
                        };
                        InventoryMovementStatusHelper.createDataSource = function () {
                            var items = [
                                InventoryMovementStatus.Requested,
                                InventoryMovementStatus.Approved,
                                InventoryMovementStatus.Ordered,
                                InventoryMovementStatus.Waiting,
                                InventoryMovementStatus.Allocated,
                                InventoryMovementStatus.Completed,
                            ];
                            return new kendo.data.DataSource({
                                data: items.map(function (x) { return ({ name: InventoryMovementStatusHelper.toDisplayString(x), value: x }); })
                            });
                        };
                        return InventoryMovementStatusHelper;
                    }());
                    Shared.InventoryMovementStatusHelper = InventoryMovementStatusHelper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementStatus.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var BulkEditStatus;
                    (function (BulkEditStatus) {
                        BulkEditStatus[BulkEditStatus["Normal"] = 0] = "Normal";
                        BulkEditStatus[BulkEditStatus["Postponed"] = 1] = "Postponed";
                        BulkEditStatus[BulkEditStatus["Cancelled"] = 2] = "Cancelled";
                    })(BulkEditStatus = Shared.BulkEditStatus || (Shared.BulkEditStatus = {}));
                    var InventoryMovementBulkModelWrapper = /** @class */ (function () {
                        function InventoryMovementBulkModelWrapper(inner) {
                            this._inner = inner;
                        }
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "Id", {
                            get: function () {
                                return this._inner.Id;
                            },
                            set: function (val) {
                                this._inner.Id = val;
                                this._inner.set("Id", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "Direction", {
                            get: function () {
                                return this._inner.Direction;
                            },
                            set: function (val) {
                                this._inner.Direction = val;
                                this._inner.set("Direction", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "Type", {
                            get: function () {
                                return this._inner.Type;
                            },
                            set: function (val) {
                                this._inner.Type = val;
                                this._inner.set("Type", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "Status", {
                            get: function () {
                                return this._inner.Status;
                            },
                            set: function (val) {
                                this._inner.Status = val;
                                this._inner.set("Status", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "HandpieceId", {
                            get: function () {
                                return this._inner.HandpieceId;
                            },
                            set: function (val) {
                                this._inner.HandpieceId = val;
                                this._inner.set("HandpieceId", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "HandpieceNumber", {
                            get: function () {
                                return this._inner.HandpieceNumber;
                            },
                            set: function (val) {
                                this._inner.HandpieceNumber = val;
                                this._inner.set("HandpieceNumber", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "HandpieceStatus", {
                            get: function () {
                                return this._inner.HandpieceStatus;
                            },
                            set: function (val) {
                                this._inner.HandpieceStatus = val;
                                this._inner.set("HandpieceStatus", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "RequiredQuantity", {
                            get: function () {
                                return this._inner.RequiredQuantity;
                            },
                            set: function (val) {
                                this._inner.RequiredQuantity = val;
                                this._inner.set("RequiredQuantity", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "Quantity", {
                            get: function () {
                                return this._inner.Quantity;
                            },
                            set: function (val) {
                                this._inner.Quantity = val;
                                this._inner.set("Quantity", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "QuantityAbsolute", {
                            get: function () {
                                return this._inner.QuantityAbsolute;
                            },
                            set: function (val) {
                                this._inner.QuantityAbsolute = val;
                                this._inner.set("QuantityAbsolute", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "AveragePrice", {
                            get: function () {
                                return this._inner.AveragePrice;
                            },
                            set: function (val) {
                                this._inner.AveragePrice = val;
                                this._inner.set("AveragePrice", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "Price", {
                            get: function () {
                                return this._inner.Price;
                            },
                            set: function (val) {
                                this._inner.Price = val;
                                this._inner.set("Price", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "CreatedOn", {
                            get: function () {
                                return this._inner.CreatedOn;
                            },
                            set: function (val) {
                                this._inner.CreatedOn = val;
                                this._inner.set("CreatedOn", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "CompletedOn", {
                            get: function () {
                                return this._inner.CompletedOn;
                            },
                            set: function (val) {
                                this._inner.CompletedOn = val;
                                this._inner.set("CompletedOn", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "PartsComment", {
                            get: function () {
                                return this._inner.PartsComment;
                            },
                            set: function (val) {
                                this._inner.PartsComment = val;
                                this._inner.set("PartsComment", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "MovementComment", {
                            get: function () {
                                return this._inner.MovementComment;
                            },
                            set: function (val) {
                                this._inner.MovementComment = val;
                                this._inner.set("MovementComment", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkModelWrapper.prototype, "BulkEditStatus", {
                            get: function () {
                                return this._inner.BulkEditStatus;
                            },
                            set: function (val) {
                                this._inner.BulkEditStatus = val;
                                this._inner.set("BulkEditStatus", val);
                            },
                            enumerable: false,
                            configurable: true
                        });
                        return InventoryMovementBulkModelWrapper;
                    }());
                    Shared.InventoryMovementBulkModelWrapper = InventoryMovementBulkModelWrapper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementBulkModel.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementBulkCollection = /** @class */ (function () {
                        function InventoryMovementBulkCollection() {
                            this._direction = undefined;
                            this._type = undefined;
                            this._status = undefined;
                            this._averagePrice = undefined;
                            this._extraInitialQuantity = undefined;
                            this._list = [];
                        }
                        Object.defineProperty(InventoryMovementBulkCollection.prototype, "direction", {
                            get: function () {
                                return this._direction;
                            },
                            set: function (val) {
                                this._direction = val;
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkCollection.prototype, "type", {
                            get: function () {
                                return this._type;
                            },
                            set: function (val) {
                                this._type = val;
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkCollection.prototype, "status", {
                            get: function () {
                                return this._status;
                            },
                            set: function (val) {
                                this._status = val;
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkCollection.prototype, "averagePrice", {
                            get: function () {
                                return this._averagePrice;
                            },
                            set: function (val) {
                                this._averagePrice = val;
                            },
                            enumerable: false,
                            configurable: true
                        });
                        Object.defineProperty(InventoryMovementBulkCollection.prototype, "extraInitialQuantity", {
                            get: function () {
                                return this._extraInitialQuantity;
                            },
                            set: function (val) {
                                this._extraInitialQuantity = val;
                            },
                            enumerable: false,
                            configurable: true
                        });
                        InventoryMovementBulkCollection.prototype.add = function (movement) {
                            this._list.push(movement);
                        };
                        InventoryMovementBulkCollection.prototype.getBulkMovements = function () {
                            var result = [];
                            for (var _i = 0, _a = this._list; _i < _a.length; _i++) {
                                var item = _a[_i];
                                result.push({
                                    Id: item.Id,
                                    Direction: item.Direction,
                                    Type: item.Type,
                                    Status: item.Status,
                                    HandpieceId: item.HandpieceId,
                                    HandpieceNumber: item.HandpieceNumber,
                                    HandpieceStatus: item.HandpieceStatus,
                                    RequiredQuantity: item.RequiredQuantity,
                                    Quantity: item.Quantity,
                                    QuantityAbsolute: item.QuantityAbsolute,
                                    AveragePrice: item.AveragePrice,
                                    Price: item.Price,
                                    CreatedOn: this.parseDate(item.CreatedOn),
                                    CompletedOn: this.parseDate(item.CompletedOn),
                                    PartsComment: item.PartsComment,
                                    MovementComment: item.MovementComment,
                                    BulkEditStatus: Shared.BulkEditStatus.Normal,
                                });
                            }
                            return result;
                        };
                        InventoryMovementBulkCollection.prototype.parseDate = function (value) {
                            if (value === undefined || value === null) {
                                return null;
                            }
                            if (typeof value === "string") {
                                return new Date(value + "Z");
                            }
                            if (typeof value === "object") {
                                if (value instanceof Date) {
                                    return value;
                                }
                                else {
                                    throw new Error("Invalid date object type");
                                }
                            }
                            throw new Error("Invalid date type");
                        };
                        return InventoryMovementBulkCollection;
                    }());
                    Shared.InventoryMovementBulkCollection = InventoryMovementBulkCollection;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementBulkCollection.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementBulkEditor = /** @class */ (function () {
                        function InventoryMovementBulkEditor(root, movements) {
                            this._root = root;
                            this._movements = movements;
                        }
                        InventoryMovementBulkEditor.prototype.init = function () {
                            var _this = this;
                            this._items = this._movements.getBulkMovements();
                            if (!this._items.some(function (x) { return x.HandpieceId === undefined || x.HandpieceId === null; })) {
                                this._items.push({
                                    Id: "00000000-0000-0000-0000-000000000000",
                                    Direction: this._movements.direction,
                                    Type: this._movements.type,
                                    Status: this._movements.status,
                                    AveragePrice: this._movements.averagePrice,
                                    QuantityAbsolute: this._movements.extraInitialQuantity ? this._movements.extraInitialQuantity : 0,
                                    Quantity: this._movements.extraInitialQuantity ? this._movements.extraInitialQuantity : 0,
                                    CreatedOn: null,
                                    CompletedOn: null,
                                    HandpieceId: null,
                                    HandpieceNumber: null,
                                    HandpieceStatus: null,
                                    RequiredQuantity: null,
                                    Price: null,
                                    PartsComment: null,
                                    MovementComment: null,
                                    BulkEditStatus: Shared.BulkEditStatus.Normal,
                                });
                            }
                            else if (this._movements.extraInitialQuantity && this._movements.extraInitialQuantity > 0) {
                                this._items.push({
                                    Id: "00000000-0000-0000-0000-000000000000",
                                    Direction: this._movements.direction,
                                    Type: this._movements.type,
                                    Status: this._movements.status,
                                    AveragePrice: this._movements.averagePrice,
                                    QuantityAbsolute: this._movements.extraInitialQuantity ? this._movements.extraInitialQuantity : 0,
                                    Quantity: this._movements.extraInitialQuantity ? this._movements.extraInitialQuantity : 0,
                                    CreatedOn: null,
                                    CompletedOn: null,
                                    HandpieceId: null,
                                    HandpieceNumber: null,
                                    HandpieceStatus: null,
                                    RequiredQuantity: null,
                                    Price: null,
                                    PartsComment: null,
                                    MovementComment: null,
                                    BulkEditStatus: Shared.BulkEditStatus.Normal,
                                });
                            }
                            this._dataSource = this.createDataSource();
                            this._grid = this.createGrid();
                            this._form = this._root.querySelector("form.inventory-group-editor__form");
                            this._form.addEventListener("submit", function (e) { return _this.onBeforeSubmit(e); });
                            this._totalQuantity = this._root.querySelector("input.inventory-group-editor__total-quantity");
                            this._totalQuantity.addEventListener("change", function (e) { return _this.updateQuantityFromTotal(); });
                            this._movementsResult = new Shared.HiddenInputList(this._root.querySelector("div.inventory-group-editor__data"));
                            this.updateTotalQuantityFromItems();
                        };
                        InventoryMovementBulkEditor.prototype.createGrid = function () {
                            var _this = this;
                            var gridContainer = this._root.querySelector(".grid-container");
                            var gridContainerElement = document.createElement("div");
                            gridContainerElement.classList.add("k-grid-commandicons2");
                            gridContainerElement.classList.add("k-grid--dense");
                            gridContainerElement.classList.add("k-grid--small-text");
                            gridContainer.appendChild(gridContainerElement);
                            var grid = $(gridContainerElement).kendoGrid({
                                columns: this.initializeColumns(),
                                dataSource: this._dataSource,
                                editable: "incell",
                                scrollable: true,
                                dataBound: function (e) {
                                    e.sender.tbody.find("tr[role='row']").each(function (index, element) {
                                        var item = e.sender.dataItem(element);
                                        _this.updateRowStatus(element, item);
                                        $(element).find(".inventory-movements-comment").kendoTooltip();
                                    });
                                },
                                save: function (e) {
                                    setTimeout(function () {
                                        _this.updateTotalQuantityFromItems();
                                    });
                                }
                            }).data("kendoGrid");
                            return grid;
                        };
                        InventoryMovementBulkEditor.prototype.updateRowStatus = function (row, item) {
                            var postponeButton = row.querySelector(".k-grid-CustomPostpone");
                            var cancelButton = row.querySelector(".k-grid-CustomCancel");
                            switch (item.BulkEditStatus) {
                                case Shared.BulkEditStatus.Normal:
                                    postponeButton.classList.remove("active");
                                    cancelButton.classList.remove("active");
                                    break;
                                case Shared.BulkEditStatus.Postponed:
                                    postponeButton.classList.add("active");
                                    cancelButton.classList.remove("active");
                                    break;
                                case Shared.BulkEditStatus.Cancelled:
                                    postponeButton.classList.remove("active");
                                    cancelButton.classList.add("active");
                                    break;
                            }
                        };
                        InventoryMovementBulkEditor.prototype.initializeColumns = function () {
                            var _this = this;
                            var columns = [];
                            columns.push({
                                title: "Date",
                                field: "CreatedOn",
                                width: 70,
                                template: function (data) {
                                    if (data.CreatedOn !== undefined && data.CreatedOn !== null) {
                                        return kendo.toString(data.CreatedOn, "d");
                                    }
                                    else {
                                        return "";
                                    }
                                },
                            });
                            columns.push({
                                title: "QTY",
                                field: "QuantityAbsolute",
                                width: 75,
                                template: function (data) {
                                    if (data.QuantityAbsolute !== undefined && data.QuantityAbsolute !== null) {
                                        if (data.RequiredQuantity !== undefined && data.RequiredQuantity !== null) {
                                            return data.QuantityAbsolute + " / " + data.RequiredQuantity;
                                        }
                                        else {
                                            return "" + data.QuantityAbsolute;
                                        }
                                    }
                                },
                                editor: function (container, options) {
                                    var input = document.createElement("input");
                                    input.type = "number";
                                    input.name = options.field;
                                    input.classList.add("k-textbox");
                                    var item = options.model;
                                    if (item && item.RequiredQuantity !== undefined && item.RequiredQuantity !== null) {
                                        input.addEventListener("change", function (e) {
                                            var value = parseFloat(input.value);
                                            if (value > item.RequiredQuantity) {
                                                input.value = item.RequiredQuantity.toString();
                                            }
                                        });
                                    }
                                    container.append(input);
                                },
                            });
                            columns.push({
                                title: "Job",
                                width: 50,
                                template: function (data) {
                                    if (data.HandpieceId !== undefined &&
                                        data.HandpieceId !== null &&
                                        data.HandpieceNumber !== undefined &&
                                        data.HandpieceNumber !== null) {
                                        return "<a href=\"/Handpieces/Edit/" + data.HandpieceId + "\">" + data.HandpieceNumber + "</a>";
                                    }
                                    else {
                                        return "Shelf";
                                    }
                                },
                            });
                            columns.push({
                                title: "Job Status",
                                width: 100,
                                template: function (data) {
                                    if (data.HandpieceStatus !== undefined && data.HandpieceStatus !== null) {
                                        return Shared.HandpieceStatusHelper.toDisplayString(data.HandpieceStatus);
                                    }
                                    return "";
                                },
                            });
                            columns.push({
                                title: "Parts Comment",
                                field: "PartsComment",
                                width: 65,
                                template: function (data) {
                                    if (data.PartsComment === undefined || data.PartsComment === null) {
                                        return "";
                                    }
                                    var span = document.createElement("span");
                                    span.classList.add("inventory-movements-comment");
                                    span.title = data.PartsComment;
                                    span.appendChild(document.createTextNode("See here"));
                                    return span.outerHTML;
                                }
                            });
                            columns.push({
                                title: "Move Comment",
                                field: "MovementComment",
                                width: 65,
                                template: function (data) {
                                    if (data.MovementComment === undefined || data.MovementComment === null) {
                                        return "";
                                    }
                                    var span = document.createElement("span");
                                    span.classList.add("inventory-movements-comment");
                                    span.title = data.MovementComment;
                                    span.appendChild(document.createTextNode("See here"));
                                    return span.outerHTML;
                                }
                            });
                            columns.push({
                                title: "Price",
                                field: "Price",
                                width: 75,
                                template: function (data) {
                                    if (!(data.Price === undefined || data.Price === null)) {
                                        return "$" + kendo.toString(data.Price, "#,##0.##");
                                    }
                                    if (!(data.AveragePrice === undefined || data.AveragePrice === null)) {
                                        return "<i>$" + kendo.toString(data.AveragePrice, "#,##0.##") + "</i>";
                                    }
                                    return "";
                                },
                                editor: function (container, options) {
                                    var input = document.createElement("input");
                                    input.type = "number";
                                    input.name = options.field;
                                    input.classList.add("k-textbox");
                                    container.append(input);
                                },
                            });
                            columns.push({
                                title: "Total Price",
                                width: 75,
                                template: function (data) {
                                    if (data.QuantityAbsolute === undefined || data.QuantityAbsolute === null) {
                                        return "";
                                    }
                                    if (!(data.Price === undefined || data.Price === null)) {
                                        return "$" + kendo.toString(data.Price * data.QuantityAbsolute, "#,##0.##");
                                    }
                                    if (!(data.AveragePrice === undefined || data.AveragePrice === null)) {
                                        return "<i>$" + kendo.toString(data.AveragePrice * data.QuantityAbsolute, "#,##0.##") + "</i>";
                                    }
                                    return "";
                                }
                            });
                            columns.push({
                                title: "Actions",
                                width: 240,
                                command: [
                                    {
                                        name: "CustomOpenJob",
                                        iconClass: "fas fa-link",
                                        text: "&nbsp; Job",
                                        click: function (e) {
                                            e.preventDefault();
                                        }
                                    },
                                    {
                                        name: "CustomPostpone",
                                        iconClass: "fas fa-clock",
                                        text: "&nbsp; Postpone",
                                        click: function (e) {
                                            e.preventDefault();
                                            var row = e.target.closest("tr");
                                            var dataItem = new Shared.InventoryMovementBulkModelWrapper(_this._grid.dataItem(row));
                                            if (dataItem.BulkEditStatus !== Shared.BulkEditStatus.Postponed) {
                                                dataItem.BulkEditStatus = Shared.BulkEditStatus.Postponed;
                                            }
                                            else {
                                                dataItem.BulkEditStatus = Shared.BulkEditStatus.Normal;
                                            }
                                            _this._dataSource.sync();
                                            _this.updateRowStatus(row, dataItem);
                                            _this.updateTotalQuantityFromItems();
                                        }
                                    },
                                    {
                                        name: "CustomCancel",
                                        iconClass: "fas fa-ban",
                                        text: "&nbsp; Cancel",
                                        click: function (e) {
                                            e.preventDefault();
                                            var row = e.target.closest("tr");
                                            var dataItem = new Shared.InventoryMovementBulkModelWrapper(_this._grid.dataItem(row));
                                            if (dataItem.BulkEditStatus !== Shared.BulkEditStatus.Cancelled) {
                                                dataItem.BulkEditStatus = Shared.BulkEditStatus.Cancelled;
                                            }
                                            else {
                                                dataItem.BulkEditStatus = Shared.BulkEditStatus.Normal;
                                            }
                                            _this._dataSource.sync();
                                            _this.updateRowStatus(row, dataItem);
                                            _this.updateTotalQuantityFromItems();
                                        }
                                    }
                                ]
                            });
                            return columns;
                        };
                        InventoryMovementBulkEditor.prototype.createDataSource = function () {
                            var dataSource = new kendo.data.DataSource({
                                data: this._items,
                                autoSync: true,
                                schema: {
                                    model: {
                                        id: "Id",
                                        fields: {
                                            Id: { type: "string", editable: false },
                                            Direction: { type: "number", editable: false },
                                            Type: { type: "number", editable: false },
                                            Status: { type: "number", editable: false },
                                            HandpieceId: { type: "string", editable: false },
                                            HandpieceNumber: { type: "string", editable: false },
                                            HandpieceStatus: { type: "number", editable: false },
                                            Quantity: { type: "number", editable: false },
                                            QuantityAbsolute: { type: "number", editable: true },
                                            Price: { type: "number", editable: true },
                                            CreatedOn: { type: "Date", editable: false },
                                            CompletedOn: { type: "Date", editable: false },
                                            PartsComment: { type: "string", editable: false },
                                            MovementComment: { type: "string", editable: false },
                                            BulkEditStatus: { type: "number", editable: false },
                                        }
                                    }
                                }
                            });
                            return dataSource;
                        };
                        InventoryMovementBulkEditor.prototype.updateTotalQuantityFromItems = function () {
                            var items = this._dataSource.data();
                            var totalQuantityValue = items
                                .filter(function (x) { return x.BulkEditStatus === Shared.BulkEditStatus.Normal; })
                                .reduce(function (prev, curr) { return prev + curr.QuantityAbsolute; }, 0);
                            this._totalQuantity.value = totalQuantityValue.toString();
                            this._lastQuantity = totalQuantityValue;
                        };
                        InventoryMovementBulkEditor.prototype.updateQuantityFromTotal = function () {
                            var totalQuantity = parseFloat(this._totalQuantity.value);
                            var items = this._dataSource.data()
                                .map(function (x) { return new Shared.InventoryMovementBulkModelWrapper(x); })
                                .filter(function (x) { return x.BulkEditStatus === Shared.BulkEditStatus.Normal; });
                            if (typeof this._lastQuantity === "number" && typeof totalQuantity === "number") {
                                var delta = totalQuantity - this._lastQuantity;
                                if (delta > 0) {
                                    // Increasing total quantity by <delta>
                                    var remaining = delta;
                                    // Passing through movements with quantity below requested first
                                    for (var i = 0; i < items.length; i++) {
                                        if (items[i].RequiredQuantity !== undefined &&
                                            items[i].RequiredQuantity !== null &&
                                            items[i].RequiredQuantity > items[i].QuantityAbsolute) {
                                            var missing = items[i].RequiredQuantity - items[i].QuantityAbsolute;
                                            var increase = Math.min(remaining, missing);
                                            remaining -= increase;
                                            items[i].Quantity += increase;
                                            items[i].QuantityAbsolute += increase;
                                        }
                                    }
                                    // Trying to dump the rest into first Shelf movement if its present
                                    var firstShelf = items.filter(function (x) { return x.HandpieceId === undefined || x.HandpieceId === null; })[0];
                                    if (firstShelf) {
                                        firstShelf.Quantity += remaining;
                                        firstShelf.QuantityAbsolute += remaining;
                                    }
                                    else {
                                        // Otherwise - dumping everything to first item
                                        items[0].Quantity += remaining;
                                        items[0].QuantityAbsolute += remaining;
                                    }
                                }
                                else if (delta < 0) {
                                    // Decreasing total quantity by <delta>
                                    var remaining = -delta;
                                    // Passing through all Shelf movements first in reverse order
                                    for (var i = items.length - 1; i >= 0; i--) {
                                        if (items[i].HandpieceId === undefined || items[i].HandpieceId === null) {
                                            var reduction = Math.min(items[i].QuantityAbsolute, remaining);
                                            remaining -= reduction;
                                            items[i].Quantity -= reduction;
                                            items[i].QuantityAbsolute -= reduction;
                                        }
                                    }
                                    // Passing through remaining movements in reverse order
                                    for (var i = items.length - 1; i >= 0; i--) {
                                        var reduction = Math.min(items[i].QuantityAbsolute, remaining);
                                        remaining -= reduction;
                                        items[i].Quantity -= reduction;
                                        items[i].QuantityAbsolute -= reduction;
                                    }
                                }
                                this._lastQuantity = totalQuantity;
                                this._grid.dataSource.sync();
                            }
                        };
                        InventoryMovementBulkEditor.prototype.onBeforeSubmit = function (e) {
                            e.preventDefault();
                            this._movementsResult.clear();
                            var items = this._dataSource.data();
                            for (var i = 0; i < items.length; i++) {
                                var item = items[i];
                                this._movementsResult.add("Result[" + i + "].Id", item.Id);
                                if (item.QuantityAbsolute !== undefined && item.QuantityAbsolute !== null) {
                                    this._movementsResult.add("Result[" + i + "].Quantity", item.QuantityAbsolute.toString());
                                }
                                if (item.Price !== undefined && item.Price !== null) {
                                    this._movementsResult.add("Result[" + i + "].Price", item.Price.toString());
                                }
                                this._movementsResult.add("Result[" + i + "].BulkEditStatus", item.BulkEditStatus.toString());
                            }
                        };
                        return InventoryMovementBulkEditor;
                    }());
                    Shared.InventoryMovementBulkEditor = InventoryMovementBulkEditor;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementBulkEditor.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var GroupOrderWithEdit;
                (function (GroupOrderWithEdit) {
                    var InventoryMovementBulkEditor = InventoryMovements.Shared.InventoryMovementBulkEditor;
                    var GroupOrderWithEditEditor = /** @class */ (function (_super) {
                        __extends(GroupOrderWithEditEditor, _super);
                        function GroupOrderWithEditEditor(root, movements) {
                            return _super.call(this, root, movements) || this;
                        }
                        return GroupOrderWithEditEditor;
                    }(InventoryMovementBulkEditor));
                    GroupOrderWithEdit.GroupOrderWithEditEditor = GroupOrderWithEditEditor;
                })(GroupOrderWithEdit = InventoryMovements.GroupOrderWithEdit || (InventoryMovements.GroupOrderWithEdit = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=GroupOrderWithEditEditor.js.map