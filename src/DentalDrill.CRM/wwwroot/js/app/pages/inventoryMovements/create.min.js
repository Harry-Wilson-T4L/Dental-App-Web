var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementType;
                    (function (InventoryMovementType) {
                        InventoryMovementType[InventoryMovementType["Initial"] = 0] = "Initial";
                        InventoryMovementType[InventoryMovementType["Order"] = 1] = "Order";
                        InventoryMovementType[InventoryMovementType["Found"] = 2] = "Found";
                        InventoryMovementType[InventoryMovementType["MoveFromAnotherWorkshop"] = 100] = "MoveFromAnotherWorkshop";
                        InventoryMovementType[InventoryMovementType["EphemeralMissingRequiredQuantity"] = 500] = "EphemeralMissingRequiredQuantity";
                        InventoryMovementType[InventoryMovementType["Repair"] = 1000] = "Repair";
                        InventoryMovementType[InventoryMovementType["Lost"] = 1001] = "Lost";
                        InventoryMovementType[InventoryMovementType["RepairFragment"] = 1002] = "RepairFragment";
                        InventoryMovementType[InventoryMovementType["MoveToAnotherWorkshop"] = 1100] = "MoveToAnotherWorkshop";
                    })(InventoryMovementType = Shared.InventoryMovementType || (Shared.InventoryMovementType = {}));
                    var InventoryMovementCreateType;
                    (function (InventoryMovementCreateType) {
                        InventoryMovementCreateType[InventoryMovementCreateType["Order"] = 1] = "Order";
                        InventoryMovementCreateType[InventoryMovementCreateType["Found"] = 2] = "Found";
                        InventoryMovementCreateType[InventoryMovementCreateType["Lost"] = 1001] = "Lost";
                        InventoryMovementCreateType[InventoryMovementCreateType["MoveBetweenWorkshops"] = 5000] = "MoveBetweenWorkshops";
                        InventoryMovementCreateType[InventoryMovementCreateType["MoveFromAnotherWorkshop"] = 100] = "MoveFromAnotherWorkshop";
                        InventoryMovementCreateType[InventoryMovementCreateType["MoveToAnotherWorkshop"] = 1100] = "MoveToAnotherWorkshop";
                    })(InventoryMovementCreateType = Shared.InventoryMovementCreateType || (Shared.InventoryMovementCreateType = {}));
                    var InventoryMovementTypeHelper = /** @class */ (function () {
                        function InventoryMovementTypeHelper() {
                        }
                        InventoryMovementTypeHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementType.Initial:
                                    return "Initial";
                                case InventoryMovementType.Order:
                                    return "Order";
                                case InventoryMovementType.Found:
                                    return "Found";
                                case InventoryMovementType.MoveFromAnotherWorkshop:
                                    return "Move from another workshop";
                                case InventoryMovementType.EphemeralMissingRequiredQuantity:
                                    return "Pending Order";
                                case InventoryMovementType.Repair:
                                    return "Repair";
                                case InventoryMovementType.Lost:
                                    return "Lost";
                                case InventoryMovementType.RepairFragment:
                                    return "Repair (Partial)";
                                case InventoryMovementType.MoveToAnotherWorkshop:
                                    return "Move to another workshop";
                                default:
                                    throw new Error("Invalid movement type");
                            }
                        };
                        InventoryMovementTypeHelper.createDataSource = function () {
                            var items = [
                                InventoryMovementType.Initial,
                                InventoryMovementType.Order,
                                InventoryMovementType.Found,
                                InventoryMovementType.MoveFromAnotherWorkshop,
                                InventoryMovementType.EphemeralMissingRequiredQuantity,
                                InventoryMovementType.Repair,
                                InventoryMovementType.Lost,
                                InventoryMovementType.RepairFragment,
                                InventoryMovementType.MoveToAnotherWorkshop,
                            ];
                            return new kendo.data.DataSource({
                                data: items.map(function (x) { return ({ name: InventoryMovementTypeHelper.toDisplayString(x), value: x }); })
                            });
                        };
                        return InventoryMovementTypeHelper;
                    }());
                    Shared.InventoryMovementTypeHelper = InventoryMovementTypeHelper;
                    var InventoryMovementCreateTypeHelper = /** @class */ (function () {
                        function InventoryMovementCreateTypeHelper() {
                        }
                        InventoryMovementCreateTypeHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementCreateType.Order:
                                    return "Order";
                                case InventoryMovementCreateType.Found:
                                    return "Found";
                                case InventoryMovementCreateType.Lost:
                                    return "Lost";
                                case InventoryMovementCreateType.MoveBetweenWorkshops:
                                    return "Move between workshops";
                                case InventoryMovementCreateType.MoveFromAnotherWorkshop:
                                    return "Move from another workshop";
                                case InventoryMovementCreateType.MoveToAnotherWorkshop:
                                    return "Move to another workshop";
                                default:
                                    throw new Error("Invalid movement type");
                            }
                        };
                        return InventoryMovementCreateTypeHelper;
                    }());
                    Shared.InventoryMovementCreateTypeHelper = InventoryMovementCreateTypeHelper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementType.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Shared;
                (function (Shared) {
                    var InventoryMovementStatus;
                    (function (InventoryMovementStatus) {
                        InventoryMovementStatus[InventoryMovementStatus["Cancelled"] = 0] = "Cancelled";
                        InventoryMovementStatus[InventoryMovementStatus["Requested"] = 10] = "Requested";
                        InventoryMovementStatus[InventoryMovementStatus["Approved"] = 20] = "Approved";
                        InventoryMovementStatus[InventoryMovementStatus["Ordered"] = 30] = "Ordered";
                        InventoryMovementStatus[InventoryMovementStatus["Waiting"] = 40] = "Waiting";
                        InventoryMovementStatus[InventoryMovementStatus["Allocated"] = 90] = "Allocated";
                        InventoryMovementStatus[InventoryMovementStatus["Completed"] = 100] = "Completed";
                    })(InventoryMovementStatus = Shared.InventoryMovementStatus || (Shared.InventoryMovementStatus = {}));
                    var InventoryMovementStatusHelper = /** @class */ (function () {
                        function InventoryMovementStatusHelper() {
                        }
                        InventoryMovementStatusHelper.toDisplayString = function (value) {
                            switch (value) {
                                case InventoryMovementStatus.Cancelled:
                                    return "Cancelled";
                                case InventoryMovementStatus.Requested:
                                    return "To be approved";
                                case InventoryMovementStatus.Approved:
                                    return "To be ordered";
                                case InventoryMovementStatus.Ordered:
                                    return "Ordered";
                                case InventoryMovementStatus.Waiting:
                                    return "Waiting";
                                case InventoryMovementStatus.Allocated:
                                    return "Allocated";
                                case InventoryMovementStatus.Completed:
                                    return "Completed";
                                default:
                                    throw new Error("Invalid movement status");
                            }
                        };
                        InventoryMovementStatusHelper.createDataSource = function () {
                            var items = [
                                InventoryMovementStatus.Requested,
                                InventoryMovementStatus.Approved,
                                InventoryMovementStatus.Ordered,
                                InventoryMovementStatus.Waiting,
                                InventoryMovementStatus.Allocated,
                                InventoryMovementStatus.Completed,
                            ];
                            return new kendo.data.DataSource({
                                data: items.map(function (x) { return ({ name: InventoryMovementStatusHelper.toDisplayString(x), value: x }); })
                            });
                        };
                        return InventoryMovementStatusHelper;
                    }());
                    Shared.InventoryMovementStatusHelper = InventoryMovementStatusHelper;
                })(Shared = InventoryMovements.Shared || (InventoryMovements.Shared = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementStatus.js.map
var DentalDrill;
(function (DentalDrill) {
    var CRM;
    (function (CRM) {
        var Pages;
        (function (Pages) {
            var InventoryMovements;
            (function (InventoryMovements) {
                var Create;
                (function (Create) {
                    var InventoryMovementCreateType = InventoryMovements.Shared.InventoryMovementCreateType;
                    var InventoryMovementStatus = InventoryMovements.Shared.InventoryMovementStatus;
                    var InventoryMovementStatusHelper = InventoryMovements.Shared.InventoryMovementStatusHelper;
                    var WorkshopDirection;
                    (function (WorkshopDirection) {
                        WorkshopDirection[WorkshopDirection["From"] = 0] = "From";
                        WorkshopDirection[WorkshopDirection["To"] = 1] = "To";
                    })(WorkshopDirection || (WorkshopDirection = {}));
                    var InventoryMovementCreateEditor = /** @class */ (function () {
                        function InventoryMovementCreateEditor(root, availableWorkshops, preselectedWorkshop) {
                            this._root = root;
                            this._rootNode = $(root);
                            this._availableWorkshops = availableWorkshops;
                            this._preselectedWorkshop = preselectedWorkshop;
                            this._dropdownType = this._rootNode.find("#Type").data("kendoDropDownList");
                            this._dropdownStatus = this._rootNode.find("#Status").data("kendoDropDownList");
                            this._dropdownFromWorkshop = this._rootNode.find("#FromWorkshop").data("kendoDropDownList");
                            this._dropdownToWorkshop = this._rootNode.find("#ToWorkshop").data("kendoDropDownList");
                        }
                        InventoryMovementCreateEditor.prototype.init = function () {
                            this._dropdownType.bind("change", this.processTypeChange.bind(this));
                            this.processTypeChange();
                        };
                        InventoryMovementCreateEditor.prototype.processTypeChange = function () {
                            var _this = this;
                            var type = parseInt(this._dropdownType.value());
                            switch (type) {
                                case InventoryMovementCreateType.Order:
                                    this.setAvailableStatuses([
                                        InventoryMovementStatus.Ordered,
                                        InventoryMovementStatus.Approved,
                                        InventoryMovementStatus.Requested
                                    ]);
                                    if (this._preselectedWorkshop) {
                                        this.configureWorkshops(WorkshopDirection.From, false, [], undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, [this._preselectedWorkshop], this._preselectedWorkshop.Id);
                                    }
                                    else {
                                        this.configureWorkshops(WorkshopDirection.From, false, [], undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, this._availableWorkshops, undefined);
                                    }
                                    break;
                                case InventoryMovementCreateType.Found:
                                    this.setAvailableStatuses([
                                        InventoryMovementStatus.Completed
                                    ]);
                                    if (this._preselectedWorkshop) {
                                        this.configureWorkshops(WorkshopDirection.From, false, [], undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, [this._preselectedWorkshop], this._preselectedWorkshop.Id);
                                    }
                                    else {
                                        this.configureWorkshops(WorkshopDirection.From, false, [], undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, this._availableWorkshops, undefined);
                                    }
                                    break;
                                case InventoryMovementCreateType.Lost:
                                    this.setAvailableStatuses([
                                        InventoryMovementStatus.Completed
                                    ]);
                                    if (this._preselectedWorkshop) {
                                        this.configureWorkshops(WorkshopDirection.From, true, [this._preselectedWorkshop], this._preselectedWorkshop.Id);
                                        this.configureWorkshops(WorkshopDirection.To, false, [], undefined);
                                    }
                                    else {
                                        this.configureWorkshops(WorkshopDirection.From, true, this._availableWorkshops, undefined);
                                        this.configureWorkshops(WorkshopDirection.To, false, [], undefined);
                                    }
                                    break;
                                case InventoryMovementCreateType.MoveBetweenWorkshops:
                                    this.setAvailableStatuses([
                                        InventoryMovementStatus.Completed
                                    ]);
                                    this.configureWorkshops(WorkshopDirection.From, true, this._availableWorkshops, undefined);
                                    this.configureWorkshops(WorkshopDirection.To, true, this._availableWorkshops, undefined);
                                    break;
                                case InventoryMovementCreateType.MoveFromAnotherWorkshop:
                                    this.setAvailableStatuses([
                                        InventoryMovementStatus.Completed
                                    ]);
                                    if (this._preselectedWorkshop) {
                                        this.configureWorkshops(WorkshopDirection.From, true, this._availableWorkshops.filter(function (x) { return x.Id !== _this._preselectedWorkshop.Id; }), undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, [this._preselectedWorkshop], this._preselectedWorkshop.Id);
                                    }
                                    else {
                                        this.configureWorkshops(WorkshopDirection.From, true, this._availableWorkshops, undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, this._availableWorkshops, undefined);
                                    }
                                    break;
                                case InventoryMovementCreateType.MoveToAnotherWorkshop:
                                    this.setAvailableStatuses([
                                        InventoryMovementStatus.Completed
                                    ]);
                                    if (this._preselectedWorkshop) {
                                        this.configureWorkshops(WorkshopDirection.From, true, [this._preselectedWorkshop], this._preselectedWorkshop.Id);
                                        this.configureWorkshops(WorkshopDirection.To, true, this._availableWorkshops.filter(function (x) { return x.Id !== _this._preselectedWorkshop.Id; }), undefined);
                                    }
                                    else {
                                        this.configureWorkshops(WorkshopDirection.From, true, this._availableWorkshops, undefined);
                                        this.configureWorkshops(WorkshopDirection.To, true, this._availableWorkshops, undefined);
                                    }
                                    break;
                            }
                        };
                        InventoryMovementCreateEditor.prototype.setAvailableStatuses = function (statuses) {
                            var oldStatus = this.getSelectedStatus();
                            this._dropdownStatus.dataSource.data(statuses.map(function (x) { return ({ Value: x, Text: InventoryMovementStatusHelper.toDisplayString(x) }); }));
                            if (statuses.indexOf(oldStatus) >= 0) {
                                this._dropdownStatus.value(oldStatus.toString());
                            }
                            else {
                                this._dropdownStatus.value(statuses[0].toString());
                            }
                        };
                        InventoryMovementCreateEditor.prototype.getSelectedStatus = function () {
                            var val = this._dropdownStatus.value();
                            if (val === undefined || val === null || val === "") {
                                return undefined;
                            }
                            var valInt = parseInt(val);
                            if (valInt === NaN) {
                                return undefined;
                            }
                            return valInt;
                        };
                        InventoryMovementCreateEditor.prototype.configureWorkshops = function (direction, enabled, available, selected) {
                            var workshopDropDownList = this.getWorkshopControl(direction);
                            workshopDropDownList.enable(enabled);
                            if (selected === undefined && available.length > 1) {
                                workshopDropDownList.dataSource.data([]);
                                workshopDropDownList.value(undefined);
                                workshopDropDownList.dataSource.data(available);
                            }
                            else if (selected === undefined && available.length == 1) {
                                workshopDropDownList.dataSource.data(available);
                                workshopDropDownList.value(available[0].Id);
                            }
                            else {
                                workshopDropDownList.dataSource.data(available);
                                workshopDropDownList.value(selected);
                            }
                        };
                        InventoryMovementCreateEditor.prototype.getWorkshopControl = function (direction) {
                            switch (direction) {
                                case WorkshopDirection.From:
                                    return this._dropdownFromWorkshop;
                                case WorkshopDirection.To:
                                    return this._dropdownToWorkshop;
                                default:
                                    throw new Error("Invalid workshop direction");
                            }
                        };
                        return InventoryMovementCreateEditor;
                    }());
                    Create.InventoryMovementCreateEditor = InventoryMovementCreateEditor;
                })(Create = InventoryMovements.Create || (InventoryMovements.Create = {}));
            })(InventoryMovements = Pages.InventoryMovements || (Pages.InventoryMovements = {}));
        })(Pages = CRM.Pages || (CRM.Pages = {}));
    })(CRM = DentalDrill.CRM || (DentalDrill.CRM = {}));
})(DentalDrill || (DentalDrill = {}));
//# sourceMappingURL=InventoryMovementCreateEditor.js.map