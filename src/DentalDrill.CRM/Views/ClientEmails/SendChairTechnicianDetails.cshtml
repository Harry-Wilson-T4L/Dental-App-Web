@using DentalDrill.CRM.Extensions
@using DevGuild.AspNetCore.Controls.HybridForms
@model DentalDrill.CRM.Models.ViewModels.ClientEmails.ClientEmailSendChairTechnicianDetailsModel
@{
    ViewBag.Title = "Send Chair Technician’s Details";
    this.ConfigureHybridPage("ClientEmailsSendChairTechnicianDetails");
}

<div class="editor mb-2">
    @if (!this.Context.IsAjaxRequest())
    {
        <div class="editor__header">
            <div class="editor__title">
                <h1>Send Chair Technician’s Details</h1>
            </div>
            <div class="editor__actions">
                <a asp-action="Details" asp-controller="Clients" asp-route-id="@Model.Client.Id" asp-route-Tab="Emails" class="editor__action"><span class="fa fa-list"></span> List</a>
            </div>
        </div>
    }

    <form asp-action="SendChairTechnicianDetails" method="post" hybrid-form-id="ClientEmailsSendChairTechnicianDetails">
        <div class="text-danger" asp-validation-summary="ModelOnly"></div>
        <div class="row">
            <div class="col-md-8">
                <div class="row">
                    <div class="col-12 mb-2">
                        <div class="row">
                            <div class="col-3">
                                <label asp-for="To"></label>
                            </div>
                            <div class="col-9">
                                @{
                                    var emails = new List<String>();
                                    emails.Add(Model.Client.Email);
                                    emails.AddRange(Model.Client.ParseSecondaryEmails());
                                }
                                @Html.Kendo().DropDownListFor(x => x.To).BindTo(new SelectList(emails.Select(x => new { Email = x }), "Email", "Email"))
                                <span class="text-danger" asp-validation-for="To"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mb-2">
                        <div class="row">
                            <div class="col-3">
                                <label>Subject</label>
                            </div>
                            <div class="col-9">
                                <p class="form-control-plaintext">Chair Technician’s Details</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mb-2">
                        <div class="row">
                            <div class="col-12">
                                <label>Text</label>
                            </div>
                            <div class="col-12">
                                <p>
                                    Hi <input asp-for="Greeting" class="k-textbox py-0 px-1 d-inline" style="width: 400px; height: 1.5rem;" />, <br />
                                    Following <input asp-for="Following" class="k-textbox py-0 px-1 d-inline" style="width: 400px; height: 1.5rem;" />, we have a chair technician
                                    that we recommend to our clients - he might be able to help you with your chair servicing/upgrades.
                                </p>
                                <p>His details are as follows:</p>
                                <p>
                                    Jamie Warner<br />
                                    URDENT<br />
                                    PO Box 1044<br />
                                    Dundas NSW 2117<br />
                                    <a href="mailto:jamie@urdentptyltd.com">jamie@urdentptyltd.com</a><br />
                                    0411 217 278
                                </p>
                                <p>
                                    Do mention that we (DDS) referred you to him (he’s covers the Sydney Metro area and some country towns too, so I’m sure he would be able to help or give advice on the phone if worst case scenario). Hope this info helps.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <h5>Attachments</h5>
                <file-uploader-list asp-for="Attachments" configuration="EmailAttachments" />
            </div>
        </div>
        <div class="row">
            <div class="col editor__submit">
                <button type="submit" class="btn btn-primary">Send</button>
                <a asp-action="Details" asp-controller="Clients" asp-route-id="@Model.Client.Id" asp-route-Tab="Emails" class="btn btn-outline-secondary ml-2 editor__submit__cancel">Cancel</a>
            </div>
        </div>
    </form>
</div>