@model DentalDrill.CRM.Models.ViewModels.HandpieceChangeIndexViewModel
@{
    this.Layout = "";
}

<kendo-grid name="HandpieceChangesGrid" height="320" class="k-grid-commandicons2 k-grid--dense k-grid--small-text">
    <columns>
        <column field="ChangedOn" title="Changed on" format="{0:d} {0:t}" width="100" />
        <column field="ChangedByName" title="Changed by" width="100" />
        <column field="OldStatus" title="Old status" template="#: data.OldStatusName#" width="100" />
        <column field="NewStatus" title="New status" template="#: data.NewStatusName#" width="100" />
        <column field="OldFields" title="Old fields" width="200" html-attributes="@(new Dictionary<String, Object> { ["style"] = "white-space: pre-wrap" })" />
        <column field="NewFields" title="New fields" width="200" html-attributes="@(new Dictionary<String, Object> { ["style"] = "white-space: pre-wrap" })" />
    </columns>
    <column-menu enabled="false" />
    <editable enabled="false" />
    <pageable enabled="false" />
    <scrollable enabled="true" />
    <datasource type="DataSourceTagHelperType.Ajax" page-size="0">
        <transport>
            <read url="@Url.Action("Read", "HandpieceChanges", new { parentId = Model.Parent.Id })" />
        </transport>
        <schema>
            <model id="Id">
                <fields>
                    <field name="ChangedOn" type="date" />
                    <field name="ChangedByName" />
                    <field name="OldStatus" />
                    <field name="NewStatus" />
                    <field name="OldFields" />
                    <field name="NewFields" />
                </fields>
            </model>
        </schema>
        <sorts>
            <sort field="ChangedOn" direction="desc" />
        </sorts>
    </datasource>
</kendo-grid>